=Module <<a_api_type subproject="server" | module Os_uploader >> =
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<span class="ocsforge_color_uid"|<<span class="ocsforge_color_uid"|Os_uploader>>>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api subproject="server" text=".." | module Os_uploader >><<span class="ocsforge_color_keyword"|end>>>>~This module defines functions to manipulate images to be uploaded~.

----
<<pre id="EXCEPTIONError_while_cropping" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|exception>> <<span class="odocwiki_name"|Error_while_cropping>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|process_status>>>>>><<div class="odocwiki_info"|~Raised if an error occured while cropping a picture~. ~The corresponding code status is given in parameter~.
>>
<<pre id="EXCEPTIONError_while_resizing" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|exception>> <<span class="odocwiki_name"|Error_while_resizing>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|process_status>>>>>><<div class="odocwiki_info"|~Raised if an error occured while resizing a picture~. ~The corresponding code status is given in parameter~.
>>
<<pre id="VALget_image_height" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|get~_image~_height>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_uid"|Lwt>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>>>>><<div class="odocwiki_info"|~Return the height of the given image~.
>>
<<pre id="VALget_image_width" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|get~_image~_width>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_uid"|Lwt>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>>>>><<div class="odocwiki_info"|~Return the width of the given image~.
>>
<<pre id="VALresize_image" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|resize~_image>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| src: >>string <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_label"| ?dst: >>string <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_label"| width: >>int <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_label"| height: >>int <<span class="ocsforge_color_delimiter"| -> >> unit <<span class="ocsforge_color_uid"|Lwt>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>>>>><<div class="odocwiki_info"|~Resize the given image ~(<<span class="odocwiki_inlinecode"|src>>~) and save it to <<span class="odocwiki_inlinecode"|dst>> ~(default is the source
   file~)~. ~If an error occured~, it raises the exception <<span class="odocwiki_inlinecode"|~Error~_while~_resizing>>
   with the corresponding unix process status~.
>>
<<pre id="VALcrop_image" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|crop~_image>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| src: >>string <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?dst: >>string <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?ratio: >>float <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| top: >>float <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_label"| right: >>float <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_label"| bottom: >>float <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_label"| left: >>float <<span class="ocsforge_color_delimiter"| -> >> unit <<span class="ocsforge_color_uid"|Lwt>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|crop~_image ~~src ~?dst ~?ratio ~~top ~~right ~~bottom ~~left>> crops the image
    saved in <<span class="odocwiki_inlinecode"|src>> and saves the result in <<span class="odocwiki_inlinecode"|dst>> ~(default is the source file~)~.
    <<span class="odocwiki_inlinecode"|top>>~, <<span class="odocwiki_inlinecode"|right>>~, <<span class="odocwiki_inlinecode"|bottom>> and <<span class="odocwiki_inlinecode"|left>> are the number of pixels the image must
    be truncated on the specific side~. ~The <<span class="odocwiki_inlinecode"|ratio>> is used after truncating the
    image~.
    ~If an error occured~, it raises the exception <<span class="odocwiki_inlinecode"|~Error~_while~_resizing>> or
    <<span class="odocwiki_inlinecode"|~Error~_while~_cropping>> with the corresponding unix process status~.
>>
<<pre id="VALrecord_image" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|record~_image>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  string <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?ratio: >>float <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?cropping: >>float * float * float * float <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_uid"|Ocsigen_extensions>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|file_info>> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_uid"|Lwt>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|record~_image directory ~?ratio ~?cropping~:~(top~, right~, bottom~, left~) file>>
    crops the image like <<span class="odocwiki_inlinecode"|crop~_image>> and save it in the directory <<span class="odocwiki_inlinecode"|directory>>~.
    ~If an error occured~, it raises the exception <<span class="odocwiki_inlinecode"|~Error~_while~_resizing>> or
    <<span class="odocwiki_inlinecode"|~Error~_while~_cropping>> with the corresponding unix process status~.
>>
