=Module <<a_api_type | module Lwt_chan >> =
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<span class="ocsforge_color_uid"|<<span class="ocsforge_color_uid"|Lwt_chan>>>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module Lwt_chan >><<span class="ocsforge_color_keyword"|end>>>>~Module <<span class="odocwiki_inlinecode"|~Lwt~_chan>>~: cooperative~, <<span class="odocwiki_inlinecode"|~Pervasives>>~-like~, ~I~/~O functions

----

~Note~: the <<a_api | module Lwt_io >> module deprecates this module~.
<<pre class="ocsforge_color odocwiki_code" id="TYPEin_channel"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|in~_channel>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<a_api text="Lwt_io.input_channel" | type Lwt_io.input_channel >>>> >><<div class="odocwiki_info"|
===@@id="3_Cooperativeinputchannels"@@~Cooperative input channels===

>>
<<pre id="VALin_channel_of_descr" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|in~_channel~_of~_descr>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Lwt_unix.file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="in_channel" | type Lwt_chan.in_channel >>>>>><<pre id="VALmake_in_channel" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|make~_in~_channel>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?close: >><<span class="ocsforge_color_delimiter"| ( >>unit <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >>bytes <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<a_api text="Lwt.t" | type Lwt.t >><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="in_channel" | type Lwt_chan.in_channel >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|make~_in~_channel read>> creates an input channel from the <<span class="odocwiki_inlinecode"|read>>
    function~. <<span class="odocwiki_inlinecode"|read s ofs len>> should ~(cooperatively~) read <<span class="odocwiki_inlinecode"|len>> bytes from
    the source~, and put them in <<span class="odocwiki_inlinecode"|s>>~, at offset <<span class="odocwiki_inlinecode"|ofs>>~, and return the number
    of bytes effectively read~. ~If provided~, <<span class="odocwiki_inlinecode"|close>> will be called by
    <<span class="odocwiki_inlinecode"|close~_in>>~. ~By default~, <<span class="odocwiki_inlinecode"|close~_in>> does not do anything~.
>>
<<pre id="VALinput_line" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|input~_line>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="in_channel" | type Lwt_chan.in_channel >> <<span class="ocsforge_color_delimiter"| -> >> string <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALinput_value" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|input~_value>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="in_channel" | type Lwt_chan.in_channel >> <<span class="ocsforge_color_delimiter"| -> >> 'a <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALinput" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|input>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="in_channel" | type Lwt_chan.in_channel >> <<span class="ocsforge_color_delimiter"| -> >> bytes <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALreally_input" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|really~_input>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="in_channel" | type Lwt_chan.in_channel >> <<span class="ocsforge_color_delimiter"| -> >> bytes <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALinput_char" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|input~_char>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="in_channel" | type Lwt_chan.in_channel >> <<span class="ocsforge_color_delimiter"| -> >> char <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALinput_binary_int" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|input~_binary~_int>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="in_channel" | type Lwt_chan.in_channel >> <<span class="ocsforge_color_delimiter"| -> >> int <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALopen_in_gen" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|open~_in~_gen>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|open_flag>> list <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="in_channel" | type Lwt_chan.in_channel >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALopen_in" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|open~_in>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="in_channel" | type Lwt_chan.in_channel >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALclose_in" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|close~_in>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="in_channel" | type Lwt_chan.in_channel >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>>

===@@id="3_Cooperativeoutputchannels"@@~Cooperative output channels===

<<pre class="ocsforge_color odocwiki_code" id="TYPEout_channel"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|out~_channel>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<a_api text="Lwt_io.output_channel" | type Lwt_io.output_channel >>>> >><<pre id="VALout_channel_of_descr" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|out~_channel~_of~_descr>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Lwt_unix.file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="out_channel" | type Lwt_chan.out_channel >>>>>><<pre id="VALmake_out_channel" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|make~_out~_channel>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?close: >><<span class="ocsforge_color_delimiter"| ( >>unit <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >>bytes <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<a_api text="Lwt.t" | type Lwt.t >><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="out_channel" | type Lwt_chan.out_channel >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|make~_out~_channel write>> creates an output channel from the <<span class="odocwiki_inlinecode"|write>>
    function~. <<span class="odocwiki_inlinecode"|write s ofs len>> should ~(cooperatively~) write <<span class="odocwiki_inlinecode"|len>> bytes from
    <<span class="odocwiki_inlinecode"|s>>~, starting at offset <<span class="odocwiki_inlinecode"|ofs>>~, to the backend~, and return the number of
    bytes effectively written~. ~If provided~, <<span class="odocwiki_inlinecode"|close>> will be called by
    <<span class="odocwiki_inlinecode"|close~_out>>~. ~By default~, <<span class="odocwiki_inlinecode"|close~_out>> does not do anything~.
>>
<<pre id="VALoutput" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|output>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="out_channel" | type Lwt_chan.out_channel >> <<span class="ocsforge_color_delimiter"| -> >> bytes <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALflush" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|flush>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="out_channel" | type Lwt_chan.out_channel >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALoutput_string" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|output~_string>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="out_channel" | type Lwt_chan.out_channel >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALoutput_value" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|output~_value>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="out_channel" | type Lwt_chan.out_channel >> <<span class="ocsforge_color_delimiter"| -> >> 'a <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALoutput_char" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|output~_char>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="out_channel" | type Lwt_chan.out_channel >> <<span class="ocsforge_color_delimiter"| -> >> char <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALoutput_binary_int" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|output~_binary~_int>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="out_channel" | type Lwt_chan.out_channel >> <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALopen_out_gen" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|open~_out~_gen>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|open_flag>> list <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="out_channel" | type Lwt_chan.out_channel >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALopen_out" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|open~_out>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="out_channel" | type Lwt_chan.out_channel >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALclose_out" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|close~_out>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="out_channel" | type Lwt_chan.out_channel >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALopen_connection" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|open~_connection>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|sockaddr>> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >><<a_api text="in_channel" | type Lwt_chan.in_channel >> * <<a_api text="out_channel" | type Lwt_chan.out_channel >><<span class="ocsforge_color_delimiter"| ) >> <<a_api text="Lwt.t" | type Lwt.t >>>>>>