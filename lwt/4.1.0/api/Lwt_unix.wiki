=Module <<a_api_type | module Lwt_unix >> =
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<span class="ocsforge_color_uid"|<<span class="ocsforge_color_uid"|Lwt_unix>>>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module Lwt_unix >><<span class="ocsforge_color_keyword"|end>>>>~Cooperative system calls

----

~This modules maps system calls~, like those of the standard
    library~'s <<span class="odocwiki_inlinecode"|~Unix>> module~, to cooperative ones~, which will not block
    the program~.


    ~The semantics of all operations is the following~: if the action
    ~(for example reading from a **file descriptor**~) can be performed
    immediately~, it is done and returns immediately~, otherwise it
    returns a sleeping thread which is woken up when the operation
    completes~.


    ~Most operations on sockets and pipes ~(on ~Windows it is only
    sockets~) are **cancelable**~, meaning you can cancel them
    with <<a_api | val Lwt.cancel >>~. ~For example if you want to read something from
    a **file descriptor** with a timeout~, you can cancel the action
    after the timeout and the reading will not be performed if not
    already done~.


    ~For example~, consider that you have two sockets <<span class="odocwiki_inlinecode"|sock~1>> and
    <<span class="odocwiki_inlinecode"|sock~2>>~. ~You want to read something from <<span class="odocwiki_inlinecode"|sock~1>> or exclusively
    from <<span class="odocwiki_inlinecode"|sock~2>> and fail with an exception if a timeout of ~1 second
    expires~, without reading anything from <<span class="odocwiki_inlinecode"|sock~1>> and <<span class="odocwiki_inlinecode"|sock~2>>~, even
    if they become readable in the future~.


    ~Then you can do~:


    
<<code language='ocaml'|    Lwt.pick
      [Lwt_unix.timeout 1.0;
       read sock1 buf1 ofs1 len1;
       read sock2 buf2 ofs2 len2]
    >>



    ~In this case~, it is guaranteed that exactly one of the three
    operations will complete~, and the others will be cancelled~.
<<pre id="VALhandle_unix_error" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|handle~_unix~_error>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >>'a <<span class="ocsforge_color_delimiter"| -> >> 'b <<a_api text="Lwt.t" | type Lwt.t >><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> 'a <<span class="ocsforge_color_delimiter"| -> >> 'b <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Same as <<span class="odocwiki_inlinecode"|~Unix~.handle~_unix~_error>> but catches lwt~-level
      exceptions
>>


==@@id="2_Configuration"@@~Configuration==

<<pre class="ocsforge_color odocwiki_code" id="TYPEasync_method"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|async~_method>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Async_none>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~System calls are made synchronously~, and may block the
          entire program~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Async_detach>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~System calls are made in another system thread~, thus without
          blocking other ~Lwt threads~. ~The drawback is that it may
          degrade performance in some cases~.


          ~This is the default~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Async_switch>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~System calls are made in the main thread~, and if one blocks
          the execution continue in another system thread~. ~This method
          is the most efficient~, also you will get better performance
          if you force all threads to run on the same cpu~. ~On linux
          this can be done by using the command <<span class="odocwiki_inlinecode"|taskset>>~.


          ~Note that this method is still experimental~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>>>>>><<div class="odocwiki_info"|~For system calls that cannot be made asynchronously~, ~Lwt uses one
    of the following method~:
>>
<<pre id="VALdefault_async_method" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|default~_async~_method>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="async_method" | type Lwt_unix.async_method >>>>>><<div class="odocwiki_info"|~Returns the default async method~.


      ~This can be initialized using the environment variable
      <<span class="odocwiki_inlinecode"|"~L~W~T~_~A~S~Y~N~C~_~M~E~T~H~O~D">> with possible values <<span class="odocwiki_inlinecode"|"none">>~,
      <<span class="odocwiki_inlinecode"|"detach">> and <<span class="odocwiki_inlinecode"|"switch">>~.
>>
<<pre id="VALset_default_async_method" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|set~_default~_async~_method>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="async_method" | type Lwt_unix.async_method >> <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Sets the default async method~.
>>
<<pre id="VALasync_method" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|async~_method>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="async_method" | type Lwt_unix.async_method >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|async~_method ~(~)>> returns the async method used in the current
      thread~.
>>
<<pre id="VALasync_method_key" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|async~_method~_key>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="async_method" | type Lwt_unix.async_method >> <<a_api text="Lwt.key" | type Lwt.key >>>>>><<div class="odocwiki_info"|~The key for storing the local async method~.
>>
<<pre id="VALwith_async_none" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|with~_async~_none>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >>unit <<span class="ocsforge_color_delimiter"| -> >> 'a<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|with~_async~_none f>> is a shorthand for~:


      
<<code language='ocaml'|        Lwt.with_value async_method_key (Some Async_none) f
      >>

>>
<<pre id="VALwith_async_detach" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|with~_async~_detach>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >>unit <<span class="ocsforge_color_delimiter"| -> >> 'a<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|with~_async~_detach f>> is a shorthand for~:


      
<<code language='ocaml'|        Lwt.with_value async_method_key (Some Async_detach) f
      >>

>>
<<pre id="VALwith_async_switch" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|with~_async~_switch>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >>unit <<span class="ocsforge_color_delimiter"| -> >> 'a<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|with~_async~_switch f>> is a shorthand for~:


      
<<code language='ocaml'|        Lwt.with_value async_method_key (Some Async_switch) f
      >>

>>


==@@id="2_Sleeping"@@~Sleeping==

<<pre id="VALsleep" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|sleep>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|float <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|sleep d>> is a thread that remains suspended for <<span class="odocwiki_inlinecode"|d>> seconds
      and then terminates~.
>>
<<pre id="VALyield" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|yield>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|yield ~(~)>> is a thread that suspends itself and then resumes
      as soon as possible and terminates~.
>>
<<pre id="VALauto_yield" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|auto~_yield>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|float <<span class="ocsforge_color_delimiter"| -> >> unit <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|auto~_yield timeout>> returns a function <<span class="odocwiki_inlinecode"|f>> that will yield
      every <<span class="odocwiki_inlinecode"|timeout>> seconds~.
>>
<<pre id="EXCEPTIONTimeout" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|exception>> <<span class="odocwiki_name"|Timeout>>>><<div class="odocwiki_info"|~Exception raised by timeout operations
>>
<<pre id="VALtimeout" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|timeout>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|float <<span class="ocsforge_color_delimiter"| -> >> 'a <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|timeout d>> is a thread that remains suspended for <<span class="odocwiki_inlinecode"|d>> seconds
      and then fails with <<a_api | exception Lwt_unix.Timeout >>~.
>>
<<pre id="VALwith_timeout" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|with~_timeout>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|float <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >>unit <<span class="ocsforge_color_delimiter"| -> >> 'a <<a_api text="Lwt.t" | type Lwt.t >><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> 'a <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|with~_timeout d f>> is a short~-hand for~:


      
<<code language='ocaml'|        Lwt.pick [Lwt_unix.timeout d; f ()]
      >>

>>


==@@id="2_Operationonfiledescriptors"@@~Operation on file~-descriptors==

<<pre class="ocsforge_color odocwiki_code" id="TYPEfile_descr"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|file~_descr>>>><<div class="odocwiki_info"|~The abstract type for **file descriptor**s~. ~A ~Lwt **file
      descriptor** is a pair of a unix **file descriptor** ~(of type
      <<span class="odocwiki_inlinecode"|~Unix~.file~_descr>>~) and a **state**~.


      ~A **file descriptor** may be~:


* **opened**~, in which case it is fully usable
* **closed** or **aborted**~, in which case it is no longer
      usable

>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEstate"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|state>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Opened>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~The **file descriptor** is opened
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Closed>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~The **file descriptor** has been closed by <<a_api | val Lwt_unix.close >>~. ~It must
          not be used for any operation~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Aborted>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|exn>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~The **file descriptor** has been aborted~, the only operation
          possible is <<a_api | val Lwt_unix.close >>~, all others will fail~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>>>>>><<div class="odocwiki_info"|~State of a **file descriptor**
>>
<<pre id="VALstate" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|state>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="state" | type Lwt_unix.state >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|state fd>> returns the state of <<span class="odocwiki_inlinecode"|fd>>
>>
<<pre id="VALunix_file_descr" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|unix~_file~_descr>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|file_descr>>>>>><<div class="odocwiki_info"|~Returns the underlying unix **file descriptor**~. ~It always
      succeeds~, even if the **file descriptor**~'s state is not
      <<span class="odocwiki_inlinecode"|~Open>>~.
>>
<<pre id="VALof_unix_file_descr" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|of~_unix~_file~_descr>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?blocking: >>bool <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?set_flags: >>bool <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|file_descr>> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="file_descr" | type Lwt_unix.file_descr >>>>>><<div class="odocwiki_info"|~Wraps a <<span class="odocwiki_inlinecode"|~Unix>> file descriptor <<span class="odocwiki_inlinecode"|fd>> in an <<span class="odocwiki_inlinecode"|~Lwt~_unix~.file~_descr>> <<span class="odocwiki_inlinecode"|fd~'>>~.


    <<span class="odocwiki_inlinecode"|~~blocking>> controls the //internal// strategy ~Lwt uses to perform ~I~/~O on
    the underlying <<span class="odocwiki_inlinecode"|fd>>~. ~Regardless of <<span class="odocwiki_inlinecode"|~~blocking>>~, at the ~A~P~I level~,
    <<span class="odocwiki_inlinecode"|~Lwt~_unix~.read>>~, <<span class="odocwiki_inlinecode"|~Lwt~_unix~.write>>~, etc~. on <<span class="odocwiki_inlinecode"|fd~'>> //always// block the ~Lwt
    thread~, but //never// block the whole process~. ~However~, for performance
    reasons~, it is important that <<span class="odocwiki_inlinecode"|~~blocking>> match the actual blocking mode of
    <<span class="odocwiki_inlinecode"|fd>>~.


    ~If <<span class="odocwiki_inlinecode"|~~blocking>> is not specified~, <<span class="odocwiki_inlinecode"|of~_unix~_file~_descr>> chooses non~-blocking
    mode for ~Unix sockets~, ~Unix pipes~, and ~Windows sockets~, and blocking mode
    for everything else~. **~Note~:** not specifying <<span class="odocwiki_inlinecode"|~~blocking>> causes <<span class="odocwiki_inlinecode"|fstat>> to
    be lazily called on <<span class="odocwiki_inlinecode"|fd>>~, the first time your code performs ~I~/~O on <<span class="odocwiki_inlinecode"|fd~'>>~.
    ~This <<span class="odocwiki_inlinecode"|fstat>> call can be expensive~, so if you use <<span class="odocwiki_inlinecode"|of~_unix~_file~_descr>> a
    lot~, be sure to specify <<span class="odocwiki_inlinecode"|~~blocking>> explicitly~.


    <<span class="odocwiki_inlinecode"|of~_unix~_file~_descr>> runs a system call to set the specified or chosen
    blocking mode on the underlying <<span class="odocwiki_inlinecode"|fd>>~.


    ~To prevent <<span class="odocwiki_inlinecode"|of~_unix~_file~_descr>> from running this system call~, you can pass
    <<span class="odocwiki_inlinecode"|~~set~_flags~:false>>~. ~Note that~, in this case~, if <<span class="odocwiki_inlinecode"|~~blocking>>~, whether passed
    explicitly or chosen by ~Lwt~, does not match the true blocking mode of the
    underlying <<span class="odocwiki_inlinecode"|fd>>~, ~I~/~O on <<span class="odocwiki_inlinecode"|fd~'>> will suffer performance degradation~.


    ~Note that <<span class="odocwiki_inlinecode"|~~set~_flags>> is effectively always <<span class="odocwiki_inlinecode"|false>> if running on ~Windows
    and <<span class="odocwiki_inlinecode"|fd>> is not a socket~.


    ~Generally~, non~-blocking ~I~/~O is faster~: for blocking ~I~/~O~, ~Lwt typically has
    to run system calls in worker threads to avoid blocking the process~. ~See
    your system documentation for whether particular kinds of file descriptors
    support non~-blocking ~I~/~O~.
>>
<<pre id="VALblocking" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|blocking>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> bool <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|blocking fd>> indicates whether ~Lwt is internally using blocking or
    non~-blocking ~I~/~O with <<span class="odocwiki_inlinecode"|fd>>~.


    ~Note that this may differ from the blocking mode of the underlying <<span class="odocwiki_inlinecode"|~Unix>>
    file descriptor ~(i~.e~. <<span class="odocwiki_inlinecode"|unix~_file~_descr fd>>~)~.


    ~See <<a_api | val Lwt_unix.of_unix_file_descr >> for details~.
>>
<<pre id="VALset_blocking" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|set~_blocking>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_label"| ?set_flags: >>bool <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> bool <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|set~_blocking fd b>> causes ~Lwt to internally use blocking or non~-blocking
    ~I~/~O with <<span class="odocwiki_inlinecode"|fd>>~, according to the value of <<span class="odocwiki_inlinecode"|b>>~.


    ~If <<span class="odocwiki_inlinecode"|~~set~_flags>> is <<span class="odocwiki_inlinecode"|true>> ~(the default~)~, ~Lwt also makes a system call to set
    the underlying file descriptor~'s blocking mode to match~. ~Otherwise~,
    <<span class="odocwiki_inlinecode"|set~_blocking>> is only informational for ~Lwt~.


    ~It is important that the underlying file descriptor actually have the same
    blocking mode as that indicated by <<span class="odocwiki_inlinecode"|b>>~.


    ~See <<a_api | val Lwt_unix.of_unix_file_descr >> for details~.
>>
<<pre id="VALabort" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|abort>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> exn <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|abort fd exn>> makes all current and further uses of the file
      descriptor fail with the given exception~. ~This put the **file
      descriptor** into the <<span class="odocwiki_inlinecode"|~Aborted>> state~.


      ~If the **file descriptor** is closed~, this does nothing~, if it is
      aborted~, this replace the abort exception by <<span class="odocwiki_inlinecode"|exn>>~.


      ~Note that this only works for reading and writing operations on
      file descriptors supporting non~-blocking mode~.
>>


==@@id="2_Processhandling"@@~Process handling==

<<pre id="VALfork" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|fork>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> int>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|fork ~(~)>> does the same as <<span class="odocwiki_inlinecode"|~Unix~.fork>>~. ~You must use this
      function instead of <<span class="odocwiki_inlinecode"|~Unix~.fork>> when you want to use ~Lwt in the
      child process~.


      ~Notes~:
* in the child process all pending jobs are canceled~,
* if you are going to use ~Lwt in the parent and the child~, it is
        a good idea to call <<a_api | val Lwt_io.flush_all >> before callling
        <<a_api | val Lwt_unix.fork >> to avoid double~-flush~.

>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEprocess_status"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|process~_status>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|process_status>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|WEXITED>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|int>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|WSIGNALED>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|int>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|WSTOPPED>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|int>>>>>>>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEwait_flag"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|wait~_flag>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|wait_flag>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|WNOHANG>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|WUNTRACED>>>>>>>>>><<pre id="VALwait" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|wait>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >>int * <<a_api text="process_status" | type Lwt_unix.process_status >><<span class="ocsforge_color_delimiter"| ) >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.wait>>
>>
<<pre id="VALwaitpid" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|waitpid>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<a_api text="wait_flag" | type Lwt_unix.wait_flag >> list <<span class="ocsforge_color_delimiter"| -> >>\\  int <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >>int * <<a_api text="process_status" | type Lwt_unix.process_status >><<span class="ocsforge_color_delimiter"| ) >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~A promise~-returning analog to
    [[ https://caml.inria.fr/pub/docs/manual-ocaml/libref/Unix.html#VALwaitpid|
    <<span class="odocwiki_inlinecode"|~Unix~.waitpid>>]]~. ~This call is non~-blocking on ~Unix~-like systems~, but is
    always blocking on ~Windows~.
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEresource_usage"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|resource~_usage>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|ru_utime:>> <<span class="odocwiki_type"|float>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~User time used
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|ru_stime:>> <<span class="odocwiki_type"|float>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~System time used
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<div class="odocwiki_info"|~Resource usages
>>
<<pre id="VALwait4" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|wait~4>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<a_api text="wait_flag" | type Lwt_unix.wait_flag >> list <<span class="ocsforge_color_delimiter"| -> >>\\  int <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >>int * <<a_api text="process_status" | type Lwt_unix.process_status >> * <<a_api text="resource_usage" | type Lwt_unix.resource_usage >><<span class="ocsforge_color_delimiter"| ) >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|wait~4 flags pid>> returns <<span class="odocwiki_inlinecode"|~(pid~, status~, rusage~)>> where <<span class="odocwiki_inlinecode"|~(pid~, status~)>>
      is the same result as <<span class="odocwiki_inlinecode"|~Unix~.waitpid flags pid>>~, and
      <<span class="odocwiki_inlinecode"|rusage>> contains accounting information about the child~.


      ~On windows it will always returns <<span class="odocwiki_inlinecode"|~{ utime ~= ~0~.~0~; stime ~= ~0~.~0 ~}>>~.
>>
<<pre id="VALwait_count" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|wait~_count>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> int>>>><<div class="odocwiki_info"|~Returns the number of threads waiting for a child to
      terminate~.
>>
<<pre id="VALsystem" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|system>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="process_status" | type Lwt_unix.process_status >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Executes the given command~, waits until it terminates~, and
      return its termination status~. ~The string is interpreted by the
      shell <<span class="odocwiki_inlinecode"|~/bin~/sh>> on ~Unix and <<span class="odocwiki_inlinecode"|cmd~.exe>> on ~Windows~. ~The result
      <<span class="odocwiki_inlinecode"|~W~E~X~I~T~E~D ~1~2~7>> indicates that the shell couldn~'t be executed~.
>>


==@@id="2_Basicfileinputoutput"@@~Basic file input~/output==

<<pre id="VALstdin" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|stdin>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >>>>>><<div class="odocwiki_info"|~The standard **file descriptor** for input~. ~This one is usually
      a terminal is the program is started from a terminal~.
>>
<<pre id="VALstdout" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|stdout>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >>>>>><<div class="odocwiki_info"|~The standard **file descriptor** for output
>>
<<pre id="VALstderr" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|stderr>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >>>>>><<div class="odocwiki_info"|~The standard **file descriptor** for printing error messages
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEfile_perm"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|file~_perm>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|file_perm>>>> >><<pre class="ocsforge_color odocwiki_code" id="TYPEopen_flag"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|open~_flag>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|open_flag>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|O_RDONLY>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|O_WRONLY>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|O_RDWR>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|O_NONBLOCK>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|O_APPEND>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|O_CREAT>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|O_TRUNC>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|O_EXCL>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|O_NOCTTY>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|O_DSYNC>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|O_SYNC>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|O_RSYNC>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|O_SHARE_DELETE>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|O_CLOEXEC>>>>>>>>>><<pre id="VALopenfile" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|openfile>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  string <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="open_flag" | type Lwt_unix.open_flag >> list <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="file_perm" | type Lwt_unix.file_perm >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="file_descr" | type Lwt_unix.file_descr >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.openfile>>~.
>>
<<pre id="VALclose" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|close>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Close a **file descriptor**~. ~This close the underlying unix **      file descriptor** and set its state to <<span class="odocwiki_inlinecode"|~Closed>>~.
>>
<<pre id="VALread" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|read>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> bytes <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|read fd buf ofs len>> reads up to <<span class="odocwiki_inlinecode"|len>> bytes from <<span class="odocwiki_inlinecode"|fd>>~, and writes them to
    <<span class="odocwiki_inlinecode"|buf>>~, starting at offset <<span class="odocwiki_inlinecode"|ofs>>~. ~The function immediately evaluates to an
    ~Lwt thread~, which waits for the operation to complete~. ~If it completes
    successfully~, the thread indicates the number of bytes actually read~, or
    zero if the end of file has been reached~.


    ~Note that the ~Lwt thread waits for data ~(or end of file~) even if the
    underlying file descriptor is in non~-blocking mode~. ~See
    <<a_api | val Lwt_unix.of_unix_file_descr >> for a discussion of non~-blocking ~I~/~O and ~Lwt~.


    ~If ~Lwt is using blocking ~I~/~O on <<span class="odocwiki_inlinecode"|fd>>~, <<span class="odocwiki_inlinecode"|read>> writes data into a temporary
    buffer~, then copies it into <<span class="odocwiki_inlinecode"|buf>>~.


    ~The thread can fail with any exception that can be raised by <<span class="odocwiki_inlinecode"|~Unix~.read>>~,
    except <<span class="odocwiki_inlinecode"|~Unix~.~Unix~_error ~Unix~.~E~A~G~A~I~N>>~, <<span class="odocwiki_inlinecode"|~Unix~.~Unix~_error ~Unix~.~E~W~O~U~L~D~B~L~O~C~K>> or
    <<span class="odocwiki_inlinecode"|~Unix~.~Unix~_error ~Unix~.~E~I~N~T~R>>~.
>>
<<pre id="VALwrite" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|write>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> bytes <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|write fd buf ofs len>> writes up to <<span class="odocwiki_inlinecode"|len>> bytes to <<span class="odocwiki_inlinecode"|fd>> from <<span class="odocwiki_inlinecode"|buf>>~, starting
    at buffer offset <<span class="odocwiki_inlinecode"|ofs>>~. ~The function immediately evaluates to an ~Lwt thread~,
    which waits for the operation to complete~. ~If the operation completes
    successfully~, the thread indicates the number of bytes actually written~,
    which may be less than <<span class="odocwiki_inlinecode"|len>>~.


    ~Note that the ~Lwt thread waits to write even if the underlying file
    descriptor is in non~-blocking mode~. ~See <<a_api | val Lwt_unix.of_unix_file_descr >> for a
    discussion of non~-blocking ~I~/~O and ~Lwt~.


    ~If ~Lwt is using blocking ~I~/~O on <<span class="odocwiki_inlinecode"|fd>>~, <<span class="odocwiki_inlinecode"|buf>> is copied before writing~.


    ~The thread can fail with any exception that can be raised by
    <<span class="odocwiki_inlinecode"|~Unix~.single~_write>>~, except <<span class="odocwiki_inlinecode"|~Unix~.~Unix~_error ~Unix~.~E~A~G~A~I~N>>~,
    <<span class="odocwiki_inlinecode"|~Unix~.~Unix~_error ~Unix~.~E~W~O~U~L~D~B~L~O~C~K>> or <<span class="odocwiki_inlinecode"|~Unix~.~Unix~_error ~Unix~.~E~I~N~T~R>>~.
>>
<<pre id="VALwrite_string" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|write~_string>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~See <<a_api | val Lwt_unix.write >>~.
>>
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="IO_vectors" | module Lwt_unix.IO_vectors >> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module Lwt_unix.IO_vectors >><<span class="ocsforge_color_keyword"|end>>>><<div class="odocwiki_info"|~Sequences of buffer slices for <<a_api | val Lwt_unix.writev >>~.
>>
<<pre id="VALreadv" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|readv>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="IO_vectors.t" | type Lwt_unix.IO_vectors.t >> <<span class="ocsforge_color_delimiter"| -> >> int <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|readv fd vs>> reads bytes from <<span class="odocwiki_inlinecode"|fd>> into the buffer slices <<span class="odocwiki_inlinecode"|vs>>~. ~If the
    operation completes successfully~, the resulting thread indicates the number
    of bytes read~.


    ~Data is always read directly into <<span class="odocwiki_inlinecode"|~Bigarray>> slices~. ~If the ~Unix file
    descriptor underlying <<span class="odocwiki_inlinecode"|fd>> is in non~-blocking mode~, data is also read
    directly into <<span class="odocwiki_inlinecode"|bytes>> slices~. ~Otherwise~, data for <<span class="odocwiki_inlinecode"|bytes>> slices is first
    read into temporary buffers~, then copied~.


    ~Note that the returned ~Lwt thread is blocked until failure or a successful
    read~, even if the underlying file descriptor is in non~-blocking mode~. ~See
    <<a_api | val Lwt_unix.of_unix_file_descr >> for a discussion of non~-blocking ~I~/~O and ~Lwt~.


    ~If <<a_api | val Lwt_unix.IO_vectors.system_limit >> is <<span class="odocwiki_inlinecode"|~Some n>> and the count of slices in <<span class="odocwiki_inlinecode"|vs>>
    exceeds <<span class="odocwiki_inlinecode"|n>>~, then <<span class="odocwiki_inlinecode"|~Lwt~_unix~.readv>> reads only into the first <<span class="odocwiki_inlinecode"|n>> slices of
    <<span class="odocwiki_inlinecode"|vs>>~.


    ~Not implemented on ~Windows~. ~It should be possible to implement~, upon
    request~, for ~Windows sockets only~.


    ~See [[http://man7.org/linux/man-pages/man3/readv.3p.html| <<span class="odocwiki_inlinecode"|readv~(~3p~)>>]]~.
**Since** 2.7.0\\
>>
<<pre id="VALwritev" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|writev>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="IO_vectors.t" | type Lwt_unix.IO_vectors.t >> <<span class="ocsforge_color_delimiter"| -> >> int <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|writev fd vs>> writes the bytes in the buffer slices <<span class="odocwiki_inlinecode"|vs>> to the file
    descriptor <<span class="odocwiki_inlinecode"|fd>>~. ~If the operation completes successfully~, the resulting
    thread indicates the number of bytes written~.


    ~If the ~Unix file descriptor underlying <<span class="odocwiki_inlinecode"|fd>> is in non~-blocking mode~,
    <<span class="odocwiki_inlinecode"|writev>> does not make a copy the bytes before writing~. ~Otherwise~, it copies
    <<span class="odocwiki_inlinecode"|bytes>> slices~, but not <<span class="odocwiki_inlinecode"|~Bigarray>> slices~.


    ~Note that the returned ~Lwt thread is blocked until failure or a successful
    write~, even if the underlying descriptor is in non~-blocking mode~. ~See
    <<a_api | val Lwt_unix.of_unix_file_descr >> for a discussion of non~-blocking ~I~/~O and ~Lwt~.


    ~If <<a_api | val Lwt_unix.IO_vectors.system_limit >> is <<span class="odocwiki_inlinecode"|~Some n>> and the count of slices in <<span class="odocwiki_inlinecode"|vs>>
    exceeds <<span class="odocwiki_inlinecode"|n>>~, then <<span class="odocwiki_inlinecode"|~Lwt~_unix~.writev>> passes only the first <<span class="odocwiki_inlinecode"|n>> slices in <<span class="odocwiki_inlinecode"|vs>>
    to the underlying <<span class="odocwiki_inlinecode"|writev>> system call~.


    ~Not implemented on ~Windows~. ~It should be possible to implement~, upon
    request~, for ~Windows sockets only~.


    ~The behavior of <<span class="odocwiki_inlinecode"|writev>> when <<span class="odocwiki_inlinecode"|vs>> has zero slices depends on the system~,
    and may change in future versions of ~Lwt~. ~On ~Linux~, <<span class="odocwiki_inlinecode"|writev>> will succeed
    and write zero bytes~. ~On ~B~S~D ~(including mac~O~S~)~, <<span class="odocwiki_inlinecode"|writev>> will fail with
    <<span class="odocwiki_inlinecode"|~Unix~.~Unix~_error ~(~Unix~.~E~I~N~V~A~L~, "writev"~, ~.~.~.~)>>~.


    ~See [[http://man7.org/linux/man-pages/man3/writev.3p.html|
    <<span class="odocwiki_inlinecode"|writev~(~3p~)>>]]~.
**Since** 2.7.0\\
>>
<<pre id="VALreadable" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|readable>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> bool>>>><<div class="odocwiki_info"|~Returns whether the given file descriptor is currently
      readable~.
>>
<<pre id="VALwritable" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|writable>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> bool>>>><<div class="odocwiki_info"|~Returns whether the given file descriptor is currently
      writable~.
>>
<<pre id="VALwait_read" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|wait~_read>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Waits ~(without blocking other threads~) until there is something
      to read from the file descriptor~.


      ~Note that you don~'t need to use this function if you are
      using ~Lwt ~I~/~O functions for reading~, since they provide
      non~-blocking waiting automatically~.


      ~The intended use case for this function is interfacing with
      existing libraries that are known to be blocking~.
>>
<<pre id="VALwait_write" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|wait~_write>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Waits ~(without blocking other threads~) until it is possible to
      write on the file descriptor~.


      ~Note that you don~'t need to use this function if you are
      using ~Lwt ~I~/~O functions for writing~, since they provide
      non~-blocking waiting automatically~.


      ~The intended use case for this function is interfacing with
      existing libraries that are known to be blocking~.
>>


==@@id="2_Seekingandtruncating"@@~Seeking and truncating==

<<pre class="ocsforge_color odocwiki_code" id="TYPEseek_command"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|seek~_command>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|seek_command>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SEEK_SET>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SEEK_CUR>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SEEK_END>>>>>>>>>><<pre id="VALlseek" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|lseek>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="seek_command" | type Lwt_unix.seek_command >> <<span class="ocsforge_color_delimiter"| -> >> int <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.lseek>>
>>
<<pre id="VALtruncate" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|truncate>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.truncate>>
>>
<<pre id="VALftruncate" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|ftruncate>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.ftruncate>>
>>


==@@id="2_Syncing"@@~Syncing==

<<pre id="VALfsync" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|fsync>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Synchronise all data and metadata of the file descriptor with
      the disk~. ~On ~Windows it uses <<span class="odocwiki_inlinecode"|~Flush~File~Buffers>>~.
>>
<<pre id="VALfdatasync" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|fdatasync>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Synchronise all data ~(but not metadata~) of the file descriptor
      with the disk~.


      ~Note that <<span class="odocwiki_inlinecode"|fdatasync>> is not available on ~Windows and ~O~S ~X~.
>>


==@@id="2_Filestatus"@@~File status==

<<pre class="ocsforge_color odocwiki_code" id="TYPEfile_kind"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|file~_kind>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|file_kind>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|S_REG>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|S_DIR>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|S_CHR>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|S_BLK>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|S_LNK>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|S_FIFO>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|S_SOCK>>>>>>>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEstats"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|stats>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|stats>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|st_dev:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|st_ino:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|st_kind:>> <<span class="odocwiki_type"|<<a_api text="file_kind" | type Lwt_unix.file_kind >>>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|st_perm:>> <<span class="odocwiki_type"|<<a_api text="file_perm" | type Lwt_unix.file_perm >>>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|st_nlink:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|st_uid:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|st_gid:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|st_rdev:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|st_size:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|st_atime:>> <<span class="odocwiki_type"|float>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|st_mtime:>> <<span class="odocwiki_type"|float>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|st_ctime:>> <<span class="odocwiki_type"|float>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<pre id="VALstat" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|stat>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="stats" | type Lwt_unix.stats >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.stat>>
>>
<<pre id="VALlstat" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|lstat>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="stats" | type Lwt_unix.stats >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.lstat>>
>>
<<pre id="VALfstat" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|fstat>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="stats" | type Lwt_unix.stats >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.fstat>>
>>
<<pre id="VALfile_exists" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|file~_exists>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> bool <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|file~_exists name>> tests if a file named <<span class="odocwiki_inlinecode"|name>> exists~.


      ~Note that <<span class="odocwiki_inlinecode"|file~_exists>> behaves similarly to
      [[http://caml.inria.fr/pub/docs/manual-ocaml/libref/Sys.html#VALfile_exists|
      <<span class="odocwiki_inlinecode"|~Sys~.file~_exists>>]]~:


* "file" is interpreted as "directory entry" in this context

* <<span class="odocwiki_inlinecode"|file~_exists name>> will return <<span class="odocwiki_inlinecode"|false>> in
        circumstances that would make <<a_api | val Lwt_unix.stat >> raise a
        [[http://caml.inria.fr/pub/docs/manual-ocaml/libref/Unix.html#EXCEPTIONUnix_error|
        <<span class="odocwiki_inlinecode"|~Unix~.~Unix~_error>>]] exception~.

>>
<<pre id="VALutimes" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|utimes>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> float <<span class="ocsforge_color_delimiter"| -> >> float <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|utimes path atime mtime>> updates the access and modification times of the
    file at <<span class="odocwiki_inlinecode"|path>>~. ~The access time is set to <<span class="odocwiki_inlinecode"|atime>> and the modification time
    to <<span class="odocwiki_inlinecode"|mtime>>~. ~To set both to the current time~, call <<span class="odocwiki_inlinecode"|utimes path ~0~. ~0~.>>~.


    ~This function corresponds to
    [[http://caml.inria.fr/pub/docs/manual-ocaml/libref/Unix.html#VALutimes|
    <<span class="odocwiki_inlinecode"|~Unix~.utimes>>]]~. ~See also
    [[http://man7.org/linux/man-pages/man3/utimes.3p.html| <<span class="odocwiki_inlinecode"|utimes~(~3p~)>>]]~.
**Since** 2.6.0\\
>>
<<pre id="VALisatty" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|isatty>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> bool <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.isatty>>
>>


==@@id="2_Fileoperationsonlargefiles"@@~File operations on large files==

<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="LargeFile" | module Lwt_unix.LargeFile >> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module Lwt_unix.LargeFile >><<span class="ocsforge_color_keyword"|end>>>>

==@@id="2_Operationsonfilenames"@@~Operations on file names==

<<pre id="VALunlink" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|unlink>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.unlink>>
>>
<<pre id="VALrename" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|rename>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.rename>>
>>
<<pre id="VALlink" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|link>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.link>>
>>


==@@id="2_Filepermissionsandownership"@@~File permissions and ownership==

<<pre id="VALchmod" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|chmod>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="file_perm" | type Lwt_unix.file_perm >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.chmod>>
>>
<<pre id="VALfchmod" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|fchmod>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="file_perm" | type Lwt_unix.file_perm >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.fchmod>>
>>
<<pre id="VALchown" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|chown>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.chown>>
>>
<<pre id="VALfchown" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|fchown>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.fchown>>
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEaccess_permission"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|access~_permission>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|access_permission>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|R_OK>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|W_OK>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|X_OK>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|F_OK>>>>>>>>>><<pre id="VALaccess" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|access>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="access_permission" | type Lwt_unix.access_permission >> list <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.access>>
>>


==@@id="2_Operationsonfiledescriptors"@@~Operations on file descriptors==

<<pre id="VALdup" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|dup>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="file_descr" | type Lwt_unix.file_descr >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.dup>>
>>
<<pre id="VALdup2" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|dup~2>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.dup~2>>
>>
<<pre id="VALset_close_on_exec" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|set~_close~_on~_exec>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.set~_close~_on~_exec>>
>>
<<pre id="VALclear_close_on_exec" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|clear~_close~_on~_exec>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.clear~_close~_on~_exec>>
>>


==@@id="2_Directories"@@~Directories==

<<pre id="VALmkdir" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|mkdir>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="file_perm" | type Lwt_unix.file_perm >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.mkdir>>
>>
<<pre id="VALrmdir" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|rmdir>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.rmdir>>
>>
<<pre id="VALchdir" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|chdir>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.chdir>>
>>
<<pre id="VALgetcwd" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getcwd>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> string <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getcwd>>
>>
<<pre id="VALchroot" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|chroot>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.chroot>>
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEdir_handle"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|dir~_handle>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|dir_handle>>>> >><<pre id="VALopendir" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|opendir>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="dir_handle" | type Lwt_unix.dir_handle >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Opens a directory for listing~. ~Directories opened with this function must be
    explicitly closed with <<a_api | val Lwt_unix.closedir >>~. ~This is a cooperative analog of
    [[http://caml.inria.fr/pub/docs/manual-ocaml/libref/Unix.html#VALopendir|
    <<span class="odocwiki_inlinecode"|~Unix~.opendir>>]]~.
>>
<<pre id="VALreaddir" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|readdir>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="dir_handle" | type Lwt_unix.dir_handle >> <<span class="ocsforge_color_delimiter"| -> >> string <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Reads the next directory entry from the given directory~. ~Special entries
    such as <<span class="odocwiki_inlinecode"|~.>> and <<span class="odocwiki_inlinecode"|~.~.>> are included~. ~If all entries have been read~, raises
    <<span class="odocwiki_inlinecode"|~End~_of~_file>>~. ~This is a cooperative analog of
    [[http://caml.inria.fr/pub/docs/manual-ocaml/libref/Unix.html#VALreaddir|
    <<span class="odocwiki_inlinecode"|~Unix~.readdir>>]]~.
>>
<<pre id="VALreaddir_n" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|readdir~_n>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="dir_handle" | type Lwt_unix.dir_handle >> <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> string array <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|readdir~_n handle count>> reads at most <<span class="odocwiki_inlinecode"|count>> entries from the
      given directory~. ~It is more efficient than calling <<span class="odocwiki_inlinecode"|readdir>>
      <<span class="odocwiki_inlinecode"|count>> times~. ~If the length of the returned array is smaller
      than <<span class="odocwiki_inlinecode"|count>>~, this means that the end of the directory has been
      reached~.
>>
<<pre id="VALrewinddir" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|rewinddir>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="dir_handle" | type Lwt_unix.dir_handle >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Resets the given directory handle~, so that directory listing can be
    restarted~. ~Cooperative analog of
    [[http://caml.inria.fr/pub/docs/manual-ocaml/libref/Unix.html#VALrewinddir|
    <<span class="odocwiki_inlinecode"|~Unix~.rewinddir>>]]~.
>>
<<pre id="VALclosedir" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|closedir>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="dir_handle" | type Lwt_unix.dir_handle >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Closes a directory handle~. ~Cooperative analog of
    [[http://caml.inria.fr/pub/docs/manual-ocaml/libref/Unix.html#VALclosedir|
    <<span class="odocwiki_inlinecode"|~Unix~.closedir>>]]~.
>>
<<pre id="VALfiles_of_directory" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|files~_of~_directory>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> string <<a_api text="Lwt_stream.t" | type Lwt_stream.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|files~_of~_directory dir>> returns the stream of all files of
      <<span class="odocwiki_inlinecode"|dir>>~.
>>


==@@id="2_Pipesandredirections"@@~Pipes and redirections==

<<pre id="VALpipe" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|pipe>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="file_descr" | type Lwt_unix.file_descr >> * <<a_api text="file_descr" | type Lwt_unix.file_descr >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|pipe ~(~)>> creates pipe using <<span class="odocwiki_inlinecode"|~Unix~.pipe>> and returns two lwt **      file descriptor**s created from unix **file~_descriptor**
>>
<<pre id="VALpipe_in" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|pipe~_in>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="file_descr" | type Lwt_unix.file_descr >> * <<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|file_descr>>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|pipe~_in ~(~)>> is the same as <<a_api | val Lwt_unix.pipe >> but maps only the unix **      file descriptor** for reading into a lwt one~. ~The second is not
      put into non~-blocking mode~. ~You usually want to use this before
      forking to receive data from the child process~.
>>
<<pre id="VALpipe_out" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|pipe~_out>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|file_descr>> * <<a_api text="file_descr" | type Lwt_unix.file_descr >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|pipe~_out ~(~)>> is the inverse of <<a_api | val Lwt_unix.pipe_in >>~. ~You usually want to
      use this before forking to send data to the child process
>>
<<pre id="VALmkfifo" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|mkfifo>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="file_perm" | type Lwt_unix.file_perm >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.mkfifo>>
>>


==@@id="2_Symboliclinks"@@~Symbolic links==

<<pre id="VALsymlink" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|symlink>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.symlink>>
>>
<<pre id="VALreadlink" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|readlink>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> string <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.readlink>>
>>


==@@id="2_Locking"@@~Locking==

<<pre class="ocsforge_color odocwiki_code" id="TYPElock_command"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|lock~_command>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|lock_command>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|F_ULOCK>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|F_LOCK>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|F_TLOCK>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|F_TEST>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|F_RLOCK>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|F_TRLOCK>>>>>>>>>><<pre id="VALlockf" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|lockf>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="lock_command" | type Lwt_unix.lock_command >> <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.lockf>>
>>


==@@id="2_Useridgroupid"@@~User id~, group id==

<<pre class="ocsforge_color odocwiki_code" id="TYPEpasswd_entry"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|passwd~_entry>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|passwd_entry>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|pw_name:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|pw_passwd:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|pw_uid:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|pw_gid:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|pw_gecos:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|pw_dir:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|pw_shell:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEgroup_entry"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|group~_entry>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|group_entry>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|gr_name:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|gr_passwd:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|gr_gid:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|gr_mem:>> <<span class="odocwiki_type"|string array>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<pre id="VALgetlogin" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getlogin>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> string <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getlogin>>
>>
<<pre id="VALgetpwnam" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getpwnam>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="passwd_entry" | type Lwt_unix.passwd_entry >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getpwnam>>
>>
<<pre id="VALgetgrnam" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getgrnam>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="group_entry" | type Lwt_unix.group_entry >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getgrnam>>
>>
<<pre id="VALgetpwuid" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getpwuid>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|int <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="passwd_entry" | type Lwt_unix.passwd_entry >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getpwuid>>
>>
<<pre id="VALgetgrgid" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getgrgid>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|int <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="group_entry" | type Lwt_unix.group_entry >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getgrgid>>
>>


==@@id="2_Signals"@@~Signals==

<<pre class="ocsforge_color odocwiki_code" id="TYPEsignal_handler_id"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|signal~_handler~_id>>>><<div class="odocwiki_info"|~Id of a signal handler~, used to cancel it
>>
<<pre id="VALon_signal" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|on~_signal>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|int <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >>int <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="signal_handler_id" | type Lwt_unix.signal_handler_id >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|on~_signal signum f>> calls <<span class="odocwiki_inlinecode"|f>> each time the signal with numnber
      <<span class="odocwiki_inlinecode"|signum>> is received by the process~. ~It returns a signal handler
      identifier that can be used to stop monitoring <<span class="odocwiki_inlinecode"|signum>>~.
>>
<<pre id="VALon_signal_full" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|on~_signal~_full>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >><<a_api text="signal_handler_id" | type Lwt_unix.signal_handler_id >> <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="signal_handler_id" | type Lwt_unix.signal_handler_id >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|on~_signal~_full f>> is the same as <<span class="odocwiki_inlinecode"|on~_signal f>> except that <<span class="odocwiki_inlinecode"|f>>
      also receive the signal handler identifier as argument so it can
      disable it~.
>>
<<pre id="VALdisable_signal_handler" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|disable~_signal~_handler>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="signal_handler_id" | type Lwt_unix.signal_handler_id >> <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Stops receiving this signal
>>
<<pre id="VALsignal_count" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|signal~_count>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> int>>>><<div class="odocwiki_info"|~Returns the number of registered signal handler~.
>>
<<pre id="VALreinstall_signal_handler" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|reinstall~_signal~_handler>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|int <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|reinstall~_signal~_handler signum>> if any signal handler is
      registered for this signal with <<a_api | val Lwt_unix.on_signal >>~, it reinstall the
      signal handler ~(with <<span class="odocwiki_inlinecode"|~Sys~.set~_signal>>~)~. ~This is usefull in case
      another part of the program install another signal handler~.
>>


==@@id="2_Sockets"@@~Sockets==

<<pre class="ocsforge_color odocwiki_code" id="TYPEinet_addr"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|inet~_addr>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|inet_addr>>>> >><<pre class="ocsforge_color odocwiki_code" id="TYPEsocket_domain"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|socket~_domain>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|socket_domain>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|PF_UNIX>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|PF_INET>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|PF_INET6>>>>>>>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEsocket_type"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|socket~_type>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|socket_type>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SOCK_STREAM>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SOCK_DGRAM>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SOCK_RAW>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SOCK_SEQPACKET>>>>>>>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEsockaddr"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|sockaddr>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|sockaddr>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|ADDR_UNIX>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|string>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|ADDR_INET>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<a_api text="inet_addr" | type Lwt_unix.inet_addr >> * int>>>>>>>>>><<pre id="VALsocket" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|socket>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<a_api text="socket_domain" | type Lwt_unix.socket_domain >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="socket_type" | type Lwt_unix.socket_type >> <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="file_descr" | type Lwt_unix.file_descr >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|socket domain type proto>> is the same as <<span class="odocwiki_inlinecode"|~Unix~.socket>> but maps
      the result into a lwt **file descriptor**
>>
<<pre id="VALsocketpair" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|socketpair>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<a_api text="socket_domain" | type Lwt_unix.socket_domain >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="socket_type" | type Lwt_unix.socket_type >> <<span class="ocsforge_color_delimiter"| -> >>\\  int <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="file_descr" | type Lwt_unix.file_descr >> * <<a_api text="file_descr" | type Lwt_unix.file_descr >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.socketpair>>
>>
<<pre id="VALbind" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|bind>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="sockaddr" | type Lwt_unix.sockaddr >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Binds an address to the given socket~. ~This is the cooperative analog of
    [[http://caml.inria.fr/pub/docs/manual-ocaml/libref/Unix.html#VALbind|
    <<span class="odocwiki_inlinecode"|~Unix~.bind>>]]~. ~See also
    [[http://man7.org/linux/man-pages/man3/bind.3p.html| <<span class="odocwiki_inlinecode"|bind~(~3p~)>>]]~.
**Since** 3.0.0\\
>>
<<pre id="VALlisten" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|listen>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.listen>>
>>
<<pre id="VALaccept" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|accept>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >><<a_api text="file_descr" | type Lwt_unix.file_descr >> * <<a_api text="sockaddr" | type Lwt_unix.sockaddr >><<span class="ocsforge_color_delimiter"| ) >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.accept>>
>>
<<pre id="VALaccept_n" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|accept~_n>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >>\\  int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >><<span class="ocsforge_color_delimiter"| ( >><<a_api text="file_descr" | type Lwt_unix.file_descr >> * <<a_api text="sockaddr" | type Lwt_unix.sockaddr >><<span class="ocsforge_color_delimiter"| ) >> list * exn option<<span class="ocsforge_color_delimiter"| ) >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|accept~_n fd count>> accepts up to <<span class="odocwiki_inlinecode"|count>> connections at one time~.


* if no connection is available right now~, it returns a sleeping
      thread

* if more than ~1 and less than <<span class="odocwiki_inlinecode"|count>> are available~, it returns
      all of them

* if more than <<span class="odocwiki_inlinecode"|count>> are available~, it returns the next
      <<span class="odocwiki_inlinecode"|count>> of them

* if an error happens~, it returns the connections that have been
      successfully accepted so far and the error

      <<span class="odocwiki_inlinecode"|accept~_n>> has the advantage of improving performance~. ~If you
      want a more detailed description~, you can have a look at~:


      [[http://portal.acm.org/citation.cfm?id=1247435|~Acceptable strategies for improving web server performance]]
>>
<<pre id="VALconnect" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|connect>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="sockaddr" | type Lwt_unix.sockaddr >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.connect>>
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEshutdown_command"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|shutdown~_command>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|shutdown_command>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SHUTDOWN_RECEIVE>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SHUTDOWN_SEND>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SHUTDOWN_ALL>>>>>>>>>><<pre id="VALshutdown" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|shutdown>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="shutdown_command" | type Lwt_unix.shutdown_command >> <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.shutdown>>
>>
<<pre id="VALgetsockname" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getsockname>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="sockaddr" | type Lwt_unix.sockaddr >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getsockname>>
>>
<<pre id="VALgetpeername" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getpeername>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="sockaddr" | type Lwt_unix.sockaddr >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getpeername>>
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEmsg_flag"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|msg~_flag>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|msg_flag>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|MSG_OOB>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|MSG_DONTROUTE>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|MSG_PEEK>>>>>>>>>><<pre id="VALrecv" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|recv>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >>\\  bytes <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="msg_flag" | type Lwt_unix.msg_flag >> list <<span class="ocsforge_color_delimiter"| -> >> int <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.recv>>~.


    ~On ~Windows~, <<span class="odocwiki_inlinecode"|recv>> writes data into a temporary buffer~, then copies it into
    the given one~.
>>
<<pre id="VALrecvfrom" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|recvfrom>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >>\\  bytes <<span class="ocsforge_color_delimiter"| -> >>\\  int <<span class="ocsforge_color_delimiter"| -> >>\\  int <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="msg_flag" | type Lwt_unix.msg_flag >> list <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >>int * <<a_api text="sockaddr" | type Lwt_unix.sockaddr >><<span class="ocsforge_color_delimiter"| ) >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.recvfrom>>~.


    ~On ~Windows~, <<span class="odocwiki_inlinecode"|recvfrom>> writes data into a temporary buffer~, then copies it
    into the given one~.
>>
<<pre id="VALsend" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|send>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >>\\  bytes <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="msg_flag" | type Lwt_unix.msg_flag >> list <<span class="ocsforge_color_delimiter"| -> >> int <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.send>>~.


    ~On ~Windows~, <<span class="odocwiki_inlinecode"|send>> copies the given buffer before writing~.
>>
<<pre id="VALsendto" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|sendto>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >>\\  bytes <<span class="ocsforge_color_delimiter"| -> >>\\  int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="msg_flag" | type Lwt_unix.msg_flag >> list <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="sockaddr" | type Lwt_unix.sockaddr >> <<span class="ocsforge_color_delimiter"| -> >> int <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.sendto>>~.


    ~On ~Windows~, <<span class="odocwiki_inlinecode"|sendto>> copies the given buffer before writing~.
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEio_vector"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|io~_vector>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|iov_buffer:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|iov_offset:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|iov_length:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<div class="odocwiki_info"|~An io~-vector~. ~Used by <<a_api | val Lwt_unix.recv_msg >> and <<a_api | val Lwt_unix.send_msg >>~.
>>
<<pre id="VALio_vector" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|io~_vector>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_label"| buffer: >>string <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_label"| offset: >>int <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_label"| length: >>int <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="io_vector" | type Lwt_unix.io_vector >>>>>><<div class="odocwiki_info"|~Creates an io~-vector
>>
<<pre id="VALrecv_msg" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|recv~_msg>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| socket: >><<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| io_vectors: >><<a_api text="io_vector" | type Lwt_unix.io_vector >> list <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >>int * <<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|file_descr>> list<<span class="ocsforge_color_delimiter"| ) >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|recv~_msg ~~socket ~~io~_vectors>> receives data into a list of
    io~-vectors~, plus any file~-descriptors that may accompany the
    messages~. ~It returns a tuple whose first field is the number of
    bytes received and second is a list of received file
    descriptors~. ~The messages themselves will be recorded in the
    provided <<span class="odocwiki_inlinecode"|io~_vectors>> list~. ~Data is written directly into the
    <<span class="odocwiki_inlinecode"|iov~_buffer>> buffers~.


    ~Not implemented on ~Windows~.
>>
<<pre id="VALsend_msg" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|send~_msg>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| socket: >><<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| io_vectors: >><<a_api text="io_vector" | type Lwt_unix.io_vector >> list <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| fds: >><<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|file_descr>> list <<span class="ocsforge_color_delimiter"| -> >> int <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|send~_msg ~~socket ~~io~_vectors ~~fds>> sends data from a list of
    io~-vectors~, accompanied with a list of file~-descriptors~. ~It
    returns the number of bytes sent~. ~If fd~-passing is not possible on
    the current system and <<span class="odocwiki_inlinecode"|fds>> is not empty~, it raises
    <<span class="odocwiki_inlinecode"|~Lwt~_sys~.~Not~_available "fd~_passing">>~. ~Data is written directly from
    the <<span class="odocwiki_inlinecode"|iov~_buffer>> buffers~.


    ~Not implemented on ~Windows~.
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEcredentials"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|credentials>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|cred_pid:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|cred_uid:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|cred_gid:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<pre id="VALget_credentials" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|get~_credentials>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="credentials" | type Lwt_unix.credentials >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|get~_credentials fd>> returns credentials information from the
      given socket~. ~On some platforms~, obtaining the peer pid is not
      possible and it will be set to <<span class="odocwiki_inlinecode"|~-~1>>~. ~If obtaining credentials
      is not possible on the current system~, it raises
      <<span class="odocwiki_inlinecode"|~Lwt~_sys~.~Not~_available "get~_credentials">>~.


      ~This call is not available on windows~.
>>


===@@id="3_Socketoptions"@@~Socket options===

<<pre class="ocsforge_color odocwiki_code" id="TYPEsocket_bool_option"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|socket~_bool~_option>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|socket_bool_option>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SO_DEBUG>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SO_BROADCAST>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SO_REUSEADDR>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SO_KEEPALIVE>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SO_DONTROUTE>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SO_OOBINLINE>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SO_ACCEPTCONN>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|TCP_NODELAY>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|IPV6_ONLY>>>>>>>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEsocket_int_option"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|socket~_int~_option>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|socket_int_option>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SO_SNDBUF>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SO_RCVBUF>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SO_ERROR>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SO_TYPE>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SO_RCVLOWAT>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SO_SNDLOWAT>>>>>>>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEsocket_optint_option"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|socket~_optint~_option>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|socket_optint_option>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SO_LINGER>>>>>>>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEsocket_float_option"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|socket~_float~_option>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|socket_float_option>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SO_RCVTIMEO>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|SO_SNDTIMEO>>>>>>>>>><<pre id="VALgetsockopt" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getsockopt>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="socket_bool_option" | type Lwt_unix.socket_bool_option >> <<span class="ocsforge_color_delimiter"| -> >> bool>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getsockopt>>
>>
<<pre id="VALsetsockopt" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|setsockopt>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="socket_bool_option" | type Lwt_unix.socket_bool_option >> <<span class="ocsforge_color_delimiter"| -> >> bool <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.setsockopt>>
>>
<<pre id="VALgetsockopt_int" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getsockopt~_int>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="socket_int_option" | type Lwt_unix.socket_int_option >> <<span class="ocsforge_color_delimiter"| -> >> int>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getsockopt~_int>>
>>
<<pre id="VALsetsockopt_int" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|setsockopt~_int>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="socket_int_option" | type Lwt_unix.socket_int_option >> <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.setsockopt~_int>>
>>
<<pre id="VALgetsockopt_optint" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getsockopt~_optint>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="socket_optint_option" | type Lwt_unix.socket_optint_option >> <<span class="ocsforge_color_delimiter"| -> >> int option>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getsockopt~_optint>>
>>
<<pre id="VALsetsockopt_optint" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|setsockopt~_optint>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="socket_optint_option" | type Lwt_unix.socket_optint_option >> <<span class="ocsforge_color_delimiter"| -> >> int option <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.setsockopt~_optint>>
>>
<<pre id="VALgetsockopt_float" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getsockopt~_float>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="socket_float_option" | type Lwt_unix.socket_float_option >> <<span class="ocsforge_color_delimiter"| -> >> float>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getsockopt~_float>>
>>
<<pre id="VALsetsockopt_float" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|setsockopt~_float>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="socket_float_option" | type Lwt_unix.socket_float_option >> <<span class="ocsforge_color_delimiter"| -> >> float <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.setsockopt~_float>>
>>
<<pre id="VALgetsockopt_error" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getsockopt~_error>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|error>> option>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getsockopt~_error>>
>>


===@@id="3_Multicastfunctions"@@~Multicast functions===

<<pre id="VALmcast_set_loop" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|mcast~_set~_loop>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> bool <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Whether sent multicast messages are received by the sending host
>>
<<pre id="VALmcast_set_ttl" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|mcast~_set~_ttl>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Set ~T~T~L~/hops value
>>
<<pre id="VALmcast_add_membership" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|mcast~_add~_membership>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?ifname: >><<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|inet_addr>> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|inet_addr>> <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|mcast~_add~_membership fd ~~ifname addr>> joins the multicast group <<span class="odocwiki_inlinecode"|addr>>
      on the network interface <<span class="odocwiki_inlinecode"|ifname>>~.
>>
<<pre id="VALmcast_drop_membership" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|mcast~_drop~_membership>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?ifname: >><<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|inet_addr>> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|inet_addr>> <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|mcast~_drop~_membership fd ~~ifname addr>> leaves the multicast group <<span class="odocwiki_inlinecode"|addr>>
      on the network interface <<span class="odocwiki_inlinecode"|ifname>>~.
>>


==@@id="2_Hostandprotocoldatabases"@@~Host and protocol databases==

<<pre class="ocsforge_color odocwiki_code" id="TYPEhost_entry"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|host~_entry>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|host_entry>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|h_name:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|h_aliases:>> <<span class="odocwiki_type"|string array>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|h_addrtype:>> <<span class="odocwiki_type"|<<a_api text="socket_domain" | type Lwt_unix.socket_domain >>>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|h_addr_list:>> <<span class="odocwiki_type"|<<a_api text="inet_addr" | type Lwt_unix.inet_addr >> array>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEprotocol_entry"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|protocol~_entry>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|protocol_entry>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|p_name:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|p_aliases:>> <<span class="odocwiki_type"|string array>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|p_proto:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEservice_entry"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|service~_entry>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|service_entry>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|s_name:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|s_aliases:>> <<span class="odocwiki_type"|string array>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|s_port:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|s_proto:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<pre id="VALgethostname" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|gethostname>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> string <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.gethostname>>
>>
<<pre id="VALgethostbyname" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|gethostbyname>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="host_entry" | type Lwt_unix.host_entry >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.gethostbyname>>
>>
<<pre id="VALgethostbyaddr" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|gethostbyaddr>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="inet_addr" | type Lwt_unix.inet_addr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="host_entry" | type Lwt_unix.host_entry >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.gethostbyaddr>>
>>
<<pre id="VALgetprotobyname" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getprotobyname>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="protocol_entry" | type Lwt_unix.protocol_entry >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getprotobyname>>
>>
<<pre id="VALgetprotobynumber" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getprotobynumber>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|int <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="protocol_entry" | type Lwt_unix.protocol_entry >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getprotobynumber>>
>>
<<pre id="VALgetservbyname" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getservbyname>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="service_entry" | type Lwt_unix.service_entry >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getservbyname>>
>>
<<pre id="VALgetservbyport" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getservbyport>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|int <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="service_entry" | type Lwt_unix.service_entry >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getservbyport>>
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEaddr_info"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|addr~_info>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|addr_info>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|ai_family:>> <<span class="odocwiki_type"|<<a_api text="socket_domain" | type Lwt_unix.socket_domain >>>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|ai_socktype:>> <<span class="odocwiki_type"|<<a_api text="socket_type" | type Lwt_unix.socket_type >>>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|ai_protocol:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|ai_addr:>> <<span class="odocwiki_type"|<<a_api text="sockaddr" | type Lwt_unix.sockaddr >>>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|ai_canonname:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEgetaddrinfo_option"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|getaddrinfo~_option>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|getaddrinfo_option>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|AI_FAMILY>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<a_api text="socket_domain" | type Lwt_unix.socket_domain >>>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|AI_SOCKTYPE>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<a_api text="socket_type" | type Lwt_unix.socket_type >>>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|AI_PROTOCOL>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|int>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|AI_NUMERICHOST>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|AI_CANONNAME>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|AI_PASSIVE>>>>>>>>>><<pre id="VALgetaddrinfo" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getaddrinfo>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  string <<span class="ocsforge_color_delimiter"| -> >>\\  string <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="getaddrinfo_option" | type Lwt_unix.getaddrinfo_option >> list <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="addr_info" | type Lwt_unix.addr_info >> list <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getaddrinfo>>
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEname_info"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|name~_info>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|name_info>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|ni_hostname:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|ni_service:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEgetnameinfo_option"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|getnameinfo~_option>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|getnameinfo_option>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|NI_NOFQDN>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|NI_NUMERICHOST>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|NI_NAMEREQD>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|NI_NUMERICSERV>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|NI_DGRAM>>>>>>>>>><<pre id="VALgetnameinfo" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|getnameinfo>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<a_api text="sockaddr" | type Lwt_unix.sockaddr >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="getnameinfo_option" | type Lwt_unix.getnameinfo_option >> list <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="name_info" | type Lwt_unix.name_info >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.getnameinfo>>
>>


==@@id="2_Terminalinterface"@@~Terminal interface==

<<pre class="ocsforge_color odocwiki_code" id="TYPEterminal_io"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|terminal~_io>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|terminal_io>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_ignbrk:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_brkint:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_ignpar:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_parmrk:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_inpck:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_istrip:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_inlcr:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_igncr:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_icrnl:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_ixon:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_ixoff:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_opost:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_obaud:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_ibaud:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_csize:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_cstopb:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_cread:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_parenb:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_parodd:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_hupcl:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_clocal:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_isig:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_icanon:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_noflsh:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_echo:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_echoe:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_echok:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_echonl:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_vintr:>> <<span class="odocwiki_type"|char>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_vquit:>> <<span class="odocwiki_type"|char>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_verase:>> <<span class="odocwiki_type"|char>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_vkill:>> <<span class="odocwiki_type"|char>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_veof:>> <<span class="odocwiki_type"|char>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_veol:>> <<span class="odocwiki_type"|char>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_vmin:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_vtime:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_vstart:>> <<span class="odocwiki_type"|char>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_keyword"|mutable >><<span class="ocsforge_color_label"|c_vstop:>> <<span class="odocwiki_type"|char>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<pre id="VALtcgetattr" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|tcgetattr>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="terminal_io" | type Lwt_unix.terminal_io >> <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.tcgetattr>>
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEsetattr_when"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|setattr~_when>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|setattr_when>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|TCSANOW>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|TCSADRAIN>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|TCSAFLUSH>>>>>>>>>><<pre id="VALtcsetattr" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|tcsetattr>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="setattr_when" | type Lwt_unix.setattr_when >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="terminal_io" | type Lwt_unix.terminal_io >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.tcsetattr>>
>>
<<pre id="VALtcsendbreak" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|tcsendbreak>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.tcsendbreak>>
>>
<<pre id="VALtcdrain" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|tcdrain>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.tcdrain>>
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEflush_queue"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|flush~_queue>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|flush_queue>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|TCIFLUSH>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|TCOFLUSH>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|TCIOFLUSH>>>>>>>>>><<pre id="VALtcflush" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|tcflush>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="flush_queue" | type Lwt_unix.flush_queue >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.tcflush>>
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEflow_action"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|flow~_action>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Unix>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|flow_action>>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|TCOOFF>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|TCOON>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|TCIOFF>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|TCION>>>>>>>>>><<pre id="VALtcflow" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|tcflow>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="flow_action" | type Lwt_unix.flow_action >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wrapper for <<span class="odocwiki_inlinecode"|~Unix~.tcflow>>
>>


==@@id="2_Lowlevelinteraction"@@~Low~-level interaction==

<<pre id="EXCEPTIONRetry" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|exception>> <<span class="odocwiki_name"|Retry>>>><<div class="odocwiki_info"|~If an action raises <<a_api | exception Lwt_unix.Retry >>~, it will be requeued until the **      file descriptor** becomes readable~/writable again~.
>>
<<pre id="EXCEPTIONRetry_read" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|exception>> <<span class="odocwiki_name"|Retry_read>>>><<div class="odocwiki_info"|~If an action raises <<a_api | exception Lwt_unix.Retry_read >>~, it will be requeued until the
      **file descriptor** becomes readable~.
>>
<<pre id="EXCEPTIONRetry_write" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|exception>> <<span class="odocwiki_name"|Retry_write>>>><<div class="odocwiki_info"|~If an action raises <<a_api | exception Lwt_unix.Retry_read >>~, it will be requeued until the
      **file descriptor** becomes writables~.
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEio_event"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|io~_event>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Read>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Write>>>>>>>>>><<pre id="VALwrap_syscall" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|wrap~_syscall>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="io_event" | type Lwt_unix.io_event >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >>unit <<span class="ocsforge_color_delimiter"| -> >> 'a<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> 'a <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|wrap~_syscall set fd action>> wrap an action on a **file
      descriptor**~. ~It tries to execute action~, and if it can not be
      performed immediately without blocking~, it is registered for
      later~.


      ~In the latter case~, if the thread is canceled~, <<span class="odocwiki_inlinecode"|action>> is
      removed from <<span class="odocwiki_inlinecode"|set>>~.
>>
<<pre id="VALcheck_descriptor" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|check~_descriptor>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|check~_descriptor fd>> raise an exception if <<span class="odocwiki_inlinecode"|fd>> is not in the
      state <<span class="odocwiki_inlinecode"|~Open>>~.
>>
<<pre id="VALregister_action" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|register~_action>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="io_event" | type Lwt_unix.io_event >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="file_descr" | type Lwt_unix.file_descr >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >>unit <<span class="ocsforge_color_delimiter"| -> >> 'a<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> 'a <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|register~_action set fd action>> registers <<span class="odocwiki_inlinecode"|action>> on <<span class="odocwiki_inlinecode"|fd>>~. ~When
      <<span class="odocwiki_inlinecode"|fd>> becomes <<span class="odocwiki_inlinecode"|readable>>~/<<span class="odocwiki_inlinecode"|writable>> <<span class="odocwiki_inlinecode"|action>> is called~.


      ~Note~:


* you must call <<span class="odocwiki_inlinecode"|check~_descriptor fd>> before calling
      <<span class="odocwiki_inlinecode"|register~_action>>

* you should prefer using <<a_api | val Lwt_unix.wrap_syscall >>

>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEjob"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_type"|'a>> <<span class="odocwiki_name"|job>>>><<div class="odocwiki_info"|~Type of job descriptions~. ~A job description describe how to call
      a ~C function and how to get its result~. ~The ~C function may be
      executed in another system thread~.
>>
<<pre id="VALrun_job" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|run~_job>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_label"| ?async_method: >><<a_api text="async_method" | type Lwt_unix.async_method >> <<span class="ocsforge_color_delimiter"| -> >> 'a <<a_api text="job" | type Lwt_unix.job >> <<span class="ocsforge_color_delimiter"| -> >> 'a <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|run~_job ~?async~_method job>> starts <<span class="odocwiki_inlinecode"|job>> and wait for its
      termination~.


      ~The async method is choosen follow~:
* if the optional parameter <<span class="odocwiki_inlinecode"|async~_method>> is specified~, it is
        used~,
* otherwise if the local key <<a_api | val Lwt_unix.async_method_key >> is set in the
        current thread~, it is used~,
* otherwise the default method ~(returned by
        <<a_api | val Lwt_unix.default_async_method >>~) is used~.

      ~If the method is <<span class="odocwiki_inlinecode"|~Async~_none>> then the job is run synchronously
      and may block the current system thread~, thus blocking all ~Lwt
      threads~.


      ~If the method is <<span class="odocwiki_inlinecode"|~Async~_detach>> then the job is run in another
      system thread~, unless the the maximum number of worker threads
      has been reached ~(as given by <<a_api | val Lwt_unix.pool_size >>~)~.


      ~If the method is <<span class="odocwiki_inlinecode"|~Async~_switch>> then the job is run
      synchronously and if it blocks~, execution will continue in
      another system thread ~(unless the limit is reached~)~.
>>
<<pre id="VALabort_jobs" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|abort~_jobs>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|exn <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|abort~_jobs exn>> make all pending jobs to fail with exn~. ~Note
      that this does not abort the real job ~(i~.e~. the ~C function
      executing it~)~, just the lwt thread for it~.
>>
<<pre id="VALcancel_jobs" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|cancel~_jobs>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|cancel~_jobs ~(~)>> is the same as <<span class="odocwiki_inlinecode"|abort~_jobs ~Lwt~.~Canceled>>~.
>>
<<pre id="VALwait_for_jobs" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|wait~_for~_jobs>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Wait for all pending jobs to terminate~.
>>
<<pre id="VALexecute_job" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|execute~_job>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?async_method: >><<a_api text="async_method" | type Lwt_unix.async_method >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| job: >>'a <<a_api text="job" | type Lwt_unix.job >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| result: >><<span class="ocsforge_color_delimiter"| ( >>'a <<a_api text="job" | type Lwt_unix.job >> <<span class="ocsforge_color_delimiter"| -> >> 'b<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| free: >><<span class="ocsforge_color_delimiter"| ( >>'a <<a_api text="job" | type Lwt_unix.job >> <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> 'b <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_warning"|Deprecated.>>~Use <<span class="odocwiki_inlinecode"|run~_job>>~.
>>


==@@id="2_Notifications"@@~Notifications==


~Lwt internally use a pipe to send notification to the main
    thread~. ~The following functions allow to use this pipe~.
<<pre id="VALmake_notification" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|make~_notification>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_label"| ?once: >>bool <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >>unit <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> int>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|new~_notifier ~?once f>> registers a new notifier~. ~It returns the
      id of the notifier~. ~Each time a notification with this id is
      received~, <<span class="odocwiki_inlinecode"|f>> is called~.


      if <<span class="odocwiki_inlinecode"|once>> is specified~, then the notification is stopped after
      the first time it is received~. ~It defaults to <<span class="odocwiki_inlinecode"|false>>~.
>>
<<pre id="VALsend_notification" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|send~_notification>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|int <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|send~_notification id>> sends a notification~.


      ~This function is thread~-safe~.
>>
<<pre id="VALstop_notification" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|stop~_notification>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|int <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Stop the given notification~. ~Note that you should not reuse the
      id after the notification has been stopped~, the result is
      unspecified if you do so~.
>>
<<pre id="VALcall_notification" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|call~_notification>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|int <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Call the handler associated to the given notification~. ~Note that
      if the notification was defined with <<span class="odocwiki_inlinecode"|once ~= true>> it is removed~.
>>
<<pre id="VALset_notification" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|set~_notification>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|int <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >>unit <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|set~_notification id f>> replace the function associated to the
      notification by <<span class="odocwiki_inlinecode"|f>>~. ~It raises <<span class="odocwiki_inlinecode"|~Not~_found>> if the given
      notification is not found~.
>>


==@@id="2_Systemthreadspool"@@~System threads pool==


~If the program is using the async method <<span class="odocwiki_inlinecode"|~Async~_detach>> or
    <<span class="odocwiki_inlinecode"|~Async~_switch>>~, ~Lwt will launch system threads to execute
    blocking system calls asynchronously~.
<<pre id="VALpool_size" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|pool~_size>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> int>>>><<div class="odocwiki_info"|~Maximum number of system threads that can be started~. ~If this
      limit is reached~, jobs will be executed synchronously~.
>>
<<pre id="VALset_pool_size" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|set~_pool~_size>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|int <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Change the size of the pool~.
>>
<<pre id="VALthread_count" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|thread~_count>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> int>>>><<div class="odocwiki_info"|~The number of system threads running ~(excluding this one~)~.
>>
<<pre id="VALthread_waiting_count" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|thread~_waiting~_count>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> int>>>><<div class="odocwiki_info"|~The number threads waiting for a job~.
>>


==@@id="2_CPUs"@@~C~P~Us==

<<pre id="VALget_cpu" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|get~_cpu>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> int>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|get~_cpu ~(~)>> returns the number of the ~C~P~U the current thread is
      running on~.
>>
<<pre id="VALget_affinity" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|get~_affinity>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_label"| ?pid: >>int <<span class="ocsforge_color_delimiter"| -> >> unit <<span class="ocsforge_color_delimiter"| -> >> int list>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|get~_affinity ~?pid ~(~)>> returns the list of ~C~P~Us the process with
      pid <<span class="odocwiki_inlinecode"|pid>> is allowed to run on~. ~If <<span class="odocwiki_inlinecode"|pid>> is not specified then
      the affinity of the current process is returned~.
>>
<<pre id="VALset_affinity" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|set~_affinity>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_label"| ?pid: >>int <<span class="ocsforge_color_delimiter"| -> >> int list <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|set~_affinity ~?pid cpus>> sets the list of ~C~P~Us the given process
      is allowed to run on~.
>>


==@@id="2_Versionedinterfaces"@@~Versioned interfaces==

<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Versioned" | module Lwt_unix.Versioned >> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module Lwt_unix.Versioned >><<span class="ocsforge_color_keyword"|end>>>><<div class="odocwiki_info"|~Versioned variants of ~A~P~Is undergoing breaking changes~.
>>
