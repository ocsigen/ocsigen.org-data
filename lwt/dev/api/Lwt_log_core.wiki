=Module <<a_api_type | module Lwt_log_core >> =
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<span class="ocsforge_color_uid"|<<span class="ocsforge_color_uid"|Lwt_log_core>>>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module Lwt_log_core >><<span class="ocsforge_color_keyword"|end>>>>~Logging facility

----

~This module provides functions to deal with logging~.
    ~It support~:


* logging to multiple destination at the same time
* filtering logs per destination



==@@id="2_Types"@@~Types==

<<pre class="ocsforge_color odocwiki_code" id="TYPElevel"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|level>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Debug>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Debugging message~. ~They can be automatically removed by the
          syntax extension~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Info>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Informational message~. ~Suitable to be displayed when the
          program is in verbose mode~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Notice>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Same as <<span class="odocwiki_inlinecode"|~Info>>~, but is displayed by default~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Warning>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Something strange happend
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Error>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~An error message~, which should not means the end of the
          program~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Fatal>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~A fatal error happened~, in most cases the program will end
          after a fatal error~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>>>>>><<div class="odocwiki_info"|~Type of log levels~. ~A level determines the importance of a
    message
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPElogger"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|logger>>>><<div class="odocwiki_info"|~Type of a logger~. ~A logger is responsible for dispatching messages
      and storing them somewhere~.
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEsection"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|section>>>><<div class="odocwiki_info"|~Each logging message has a section~. ~Sections can be used to
      structure your logs~. ~For example you can choose different
      loggers according to the section~.


      ~Each section carries a level~, and messages with a lower log
      level than than the section level will be dropped~.


      ~Section levels are initialised using the contents of the <<span class="odocwiki_inlinecode"|~L~W~T~_~L~O~G>>
      environment variable~, which must contain one or more rules of the form
      <<span class="odocwiki_inlinecode"|pattern ~-~> level>> separated by "~;"~. ~Where <<span class="odocwiki_inlinecode"|pattern>> is a string
      that may contain <<span class="odocwiki_inlinecode"|~*>>~.


      ~For example~, if <<span class="odocwiki_inlinecode"|~L~W~T~_~L~O~G>> contains~:
      
<<code language='ocaml'|        access -> warning;
        foo[*] -> error
      >>

      then the level of the section <<span class="odocwiki_inlinecode"|"access">> is <<span class="odocwiki_inlinecode"|~Warning>> and the
      level of any section matching <<span class="odocwiki_inlinecode"|"foo~[~*~]">> is <<span class="odocwiki_inlinecode"|~Error>>~.


      ~If the pattern is omited in a rule then the pattern <<span class="odocwiki_inlinecode"|"~*">> is
      used instead~, so <<span class="odocwiki_inlinecode"|~L~W~T~_~L~O~G>> may just contain <<span class="odocwiki_inlinecode"|"debug">> for
      instance~.


      ~By default~, the following rule apply ~: <<span class="odocwiki_inlinecode"|"~* ~-~> notice">>
>>
<<pre id="VALstring_of_level" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|string~_of~_level>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="level" | type Lwt_log_core.level >> <<span class="ocsforge_color_delimiter"| -> >> string>>>><<pre id="VALlevel_of_string" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|level~_of~_string>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="level" | type Lwt_log_core.level >> option>>>><<pre id="VALload_rules" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|load~_rules>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_label"| ?fail_on_error: >>bool <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Reset the rules set when parsing the <<span class="odocwiki_inlinecode"|~L~W~T~_~L~O~G>> environment variable using this
      string~.
**Raises** {{{Failure}}} if an invalid rule is found and <<span class="odocwiki_inlinecode"|fail~_on~_error>> is true


      <<span class="odocwiki_inlinecode"|load~_rules>> parses the rules string and validates the rules before loading them~.
      ~If <<span class="odocwiki_inlinecode"|fail~_on~_error>> is <<span class="odocwiki_inlinecode"|true>>~, invalid rules will cause this function to
      raise <<span class="odocwiki_inlinecode"|~Failure>> and leave existing rules unchanged~.
      ~If <<span class="odocwiki_inlinecode"|fail~_on~_error>> is <<span class="odocwiki_inlinecode"|false>> ~(this is the default~)~, it tries to load as
      many rules as possible and ignore invalid ones~.
      ~If the rules string itself cannot be parsed~, existing rules are always left
      unchanged~.


      ~Example~:
      
<<code language='ocaml'|Lwt_log_core.load_rules ~fail_on_error:true "* -> nosuchlevel" (* Raises Failure *)
Lwt_log_core.load_rules "* -> info"
      >>
\\
>>
<<div class="odocwiki_param_info"|<<span class="code"|fail_on_error>> : defines if the function will raise ~Failure if
      it encounters a malformed rule>>
<<pre id="VALadd_rule" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|add~_rule>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="level" | type Lwt_log_core.level >> <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|add~_rule pattern level>> adds a rule for sections logging
      levels~. ~The rule is added before all other rules~. ~It takes
      effect immediately and affects all sections for which the level
      has not been set explicitly with <<a_api | val Lwt_log_core.Section.set_level >>~. <<span class="odocwiki_inlinecode"|pattern>>
      may contains <<span class="odocwiki_inlinecode"|~*>>~. ~For example~:


      
<<code language='ocaml'|        Lwt_log_core.add_rule "lwt*" Lwt_log_core.Info
      >>

>>
<<pre id="VALappend_rule" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|append~_rule>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="level" | type Lwt_log_core.level >> <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|append~_rule pattern level>> adds the given rule after all other
      rules~. ~For example to set the default fallback rule~:


      
<<code language='ocaml'|        Lwt_log_core.append_rule "*" Lwt_log_core.Info
      >>

>>
<<pre id="VALreset_rules" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|reset~_rules>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|removes all rules~.
>>


==@@id="2_Loggingfunctions"@@~Logging functions==

<<pre id="VALlog" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|log>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| level: >><<a_api text="level" | type Lwt_log_core.level >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|log ~?section ~?logger ~~level message>> logs a message~.


      <<span class="odocwiki_inlinecode"|section>> defaults to <<a_api | val Lwt_log_core.Section.main >>~. ~If <<span class="odocwiki_inlinecode"|logger>> is not
      specified~, then the default one is used instead ~(see
      <<a_api | val Lwt_log_core.default >>~)~.


      ~If <<span class="odocwiki_inlinecode"|exn>> is provided~, then its string representation
      ~(~= <<span class="odocwiki_inlinecode"|~Printexc~.to~_string exn>>~) will be append to the message~, and if
      possible the backtrace will also be logged~.


      <<span class="odocwiki_inlinecode"|location>> contains the location of the logging directive~, it is
      of the form <<span class="odocwiki_inlinecode"|~(file~_name~, line~, column~)>>~.
>>
<<pre id="VALlog_f" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|log~_f>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| level: >><<a_api text="level" | type Lwt_log_core.level >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >>'a, unit, string, unit <<a_api text="Lwt.t" | type Lwt.t >><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|format4>> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|log~_f>> is the same as <<span class="odocwiki_inlinecode"|log>> except that it takes a format
      string
>>
<<pre id="VALign_log" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|ign~_log>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| level: >><<a_api text="level" | type Lwt_log_core.level >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~Same as <<a_api | val Lwt_log_core.log >> but ignore the resulting thread~.
>>
<<pre id="VALign_log_f" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|ign~_log~_f>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| level: >><<a_api text="level" | type Lwt_log_core.level >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >>'a, unit, string, unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|format4>> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<div class="odocwiki_info"|~Same as <<a_api | val Lwt_log_core.log_f >> but ignore the resulting thread~.
>>

~The following functions are the same as <<a_api | val Lwt_log_core.log >> except that their
    name determines which level is used~.


    ~For example <<span class="odocwiki_inlinecode"|info msg>> is the same as <<span class="odocwiki_inlinecode"|log ~~level~:~Info msg>>~.
<<pre id="VALdebug" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|debug>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALdebug_f" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|debug~_f>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >>'a, unit, string, unit <<a_api text="Lwt.t" | type Lwt.t >><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|format4>> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<pre id="VALign_debug" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|ign~_debug>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<pre id="VALign_debug_f" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|ign~_debug~_f>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >>'a, unit, string, unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|format4>> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<pre id="VALinfo" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|info>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALinfo_f" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|info~_f>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >>'a, unit, string, unit <<a_api text="Lwt.t" | type Lwt.t >><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|format4>> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<pre id="VALign_info" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|ign~_info>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<pre id="VALign_info_f" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|ign~_info~_f>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >>'a, unit, string, unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|format4>> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<pre id="VALnotice" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|notice>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALnotice_f" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|notice~_f>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >>'a, unit, string, unit <<a_api text="Lwt.t" | type Lwt.t >><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|format4>> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<pre id="VALign_notice" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|ign~_notice>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<pre id="VALign_notice_f" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|ign~_notice~_f>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >>'a, unit, string, unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|format4>> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<pre id="VALwarning" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|warning>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALwarning_f" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|warning~_f>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >>'a, unit, string, unit <<a_api text="Lwt.t" | type Lwt.t >><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|format4>> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<pre id="VALign_warning" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|ign~_warning>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<pre id="VALign_warning_f" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|ign~_warning~_f>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >>'a, unit, string, unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|format4>> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<pre id="VALerror" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|error>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALerror_f" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|error~_f>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >>'a, unit, string, unit <<a_api text="Lwt.t" | type Lwt.t >><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|format4>> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<pre id="VALign_error" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|ign~_error>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<pre id="VALign_error_f" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|ign~_error~_f>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >>'a, unit, string, unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|format4>> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<pre id="VALfatal" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|fatal>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<pre id="VALfatal_f" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|fatal~_f>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >>'a, unit, string, unit <<a_api text="Lwt.t" | type Lwt.t >><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|format4>> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<pre id="VALign_fatal" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|ign~_fatal>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<pre id="VALign_fatal_f" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|ign~_fatal~_f>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?exn: >>exn <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?location: >>string * int * int <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?logger: >><<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >>'a, unit, string, unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|format4>> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Section" | module Lwt_log_core.Section >> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module Lwt_log_core.Section >><<span class="ocsforge_color_keyword"|end>>>><<div class="odocwiki_info"|~Sections
>>


==@@id="2_Logtemplates"@@~Log templates==

<<pre class="ocsforge_color odocwiki_code" id="TYPEtemplate"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|template>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|string>> >><<div class="odocwiki_info"|~A template is for generating log messages~.


        ~It is a string which may contains variables of the form
        <<span class="odocwiki_inlinecode"|~$~(var~)>>~, where <<span class="odocwiki_inlinecode"|var>> is one of~:
* <<span class="odocwiki_inlinecode"|message>> which will be replaced by the message emited
* <<span class="odocwiki_inlinecode"|level>> which will be replaced by a string representation of
          the level
* <<span class="odocwiki_inlinecode"|section>> which will be replaced by the name of the
          message~'s section
* <<span class="odocwiki_inlinecode"|loc~-file>> which will be replaced by the file name of the
          calling logging function
* <<span class="odocwiki_inlinecode"|loc~-line>> which will be replaced by the line number of the
          calling logging function
* <<span class="odocwiki_inlinecode"|loc~-column>> which will be replaced by the column number of
           the calling logging function

        ~For example~:
* <<span class="odocwiki_inlinecode"|"~$~(name~)~: ~$~(message~)">>
* <<span class="odocwiki_inlinecode"|"~$~(name~)~: ~$~(loc~-file~)~: ~$~(loc~-line~)~: ~$~(loc~-column~)~: ~$~(message~)">>

>>
<<pre id="VALrender" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|render>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| buffer: >><<span class="ocsforge_color_uid"|Buffer>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| template: >><<a_api text="template" | type Lwt_log_core.template >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| section: >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| level: >><<a_api text="level" | type Lwt_log_core.level >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_label"| message: >>string <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|render ~~buffer ~~template ~~section ~~level ~~message>> instantiate
      all variables of <<span class="odocwiki_inlinecode"|template>>~, and store the result in
      <<span class="odocwiki_inlinecode"|buffer>>~. ~The location is obtained from threads local
      storage~.
>>
<<pre id="VALlocation_key" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|location~_key>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >>string * int * int<<span class="ocsforge_color_delimiter"| ) >> <<a_api text="Lwt.key" | type Lwt.key >>>>>><<div class="odocwiki_info"|~The key for storing current location~.
>>


==@@id="2_Loggers"@@~Loggers==

<<pre id="EXCEPTIONLogger_closed" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|exception>> <<span class="odocwiki_name"|Logger_closed>>>><<div class="odocwiki_info"|~Exception raised when trying to use a closed logger
>>
<<pre id="VALmake" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|make>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| output: >><<span class="ocsforge_color_delimiter"| ( >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >>\\          <<a_api text="level" | type Lwt_log_core.level >> <<span class="ocsforge_color_delimiter"| -> >> string list <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| close: >><<span class="ocsforge_color_delimiter"| ( >>unit <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="logger" | type Lwt_log_core.logger >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|make ~~output ~~close>> creates a new logger~.
>>
<<div class="odocwiki_param_info"|<<span class="code"|output>> : is used to write logs~. ~It is a function which
      receive a section~, a level and a list lines that must be logged
      together~.>>
<<div class="odocwiki_param_info"|<<span class="code"|close>> : is used to close the logger~.>>
<<pre id="VALclose" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|close>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_delimiter"| -> >> unit <<a_api text="Lwt.t" | type Lwt.t >>>>>><<div class="odocwiki_info"|~Close the given logger
>>
<<pre id="VALdefault" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|default>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="logger" | type Lwt_log_core.logger >> <<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|ref>>>>>><<div class="odocwiki_info"|~The default logger~. ~It is used as default when no one is
      specified~. ~If <<span class="odocwiki_inlinecode"|~Lwt~_core>> is linked ~(in the package <<span class="odocwiki_inlinecode"|lwt~.unix>>~)
      the default logger sends all messages to standard error~.
      ~Otherwise the default logger is <<a_api | val Lwt_log_core.null >>~.
>>
<<pre id="VALbroadcast" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|broadcast>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="logger" | type Lwt_log_core.logger >> list <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="logger" | type Lwt_log_core.logger >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|broadcast loggers>> is a logger which send messages to all the
      given loggers~.


      ~Note~: closing a broadcast logger does not close its
      components~.
>>
<<pre id="VALdispatch" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|dispatch>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_delimiter"| ( >><<a_api text="section" | type Lwt_log_core.section >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="level" | type Lwt_log_core.level >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="logger" | type Lwt_log_core.logger >><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="logger" | type Lwt_log_core.logger >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|dispatch f>> is a logger which dispatch logging instructions to
      different logger according to their level and~/or section~.


      ~Here is an example~:


      
<<code language='ocaml'|        let access_logger = Lwt_log.file "access.log"
        and error_logger = Lwt_log.file "error.log" in

        Lwt_log_core.dispatch
          (fun section level ->
            match Lwt_log_core.Section.name section, level with
              | "access", _ -> access_logger
              | _, Lwt_log_core.Error -> error_logger)
      >>

>>


==@@id="2_Predefinedloggers"@@~Predefined loggers==

<<pre id="VALnull" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|null>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="logger" | type Lwt_log_core.logger >>>>>><<div class="odocwiki_info"|~Logger which drops everything
>>
