=Module <<a_api_type | module XmlHttpRequest >> =
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<span class="ocsforge_color_uid"|<<span class="ocsforge_color_uid"|XmlHttpRequest>>>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module XmlHttpRequest >><<span class="ocsforge_color_keyword"|end>>>>~Xml~Http~Request object~.

----
<<pre class="ocsforge_color odocwiki_code" id="TYPEreadyState"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|ready~State>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|UNSENT>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|OPENED>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|HEADERS_RECEIVED>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|LOADING>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|DONE>>>>>>>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEresponse"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_type"|'_>> <<span class="odocwiki_name"|response>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|ArrayBuffer>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Blob>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Document>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|JSON>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Text>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Default>>>>>>>>>><<pre class="ocsforge_color odocwiki_code"|<<span id="TYPExmlHttpRequest"|<<span class="ocsforge_color_keyword"|class type>> <<a_api text="xmlHttpRequest" | class type XmlHttpRequest.xmlHttpRequest >>>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_keyword"|object>><<a_api text=".." | class type XmlHttpRequest.xmlHttpRequest >><<span class="ocsforge_color_keyword"|end>>>><<pre class="ocsforge_color odocwiki_code"|<<span id="TYPExmlHttpRequestUpload"|<<span class="ocsforge_color_keyword"|class type>> <<a_api text="xmlHttpRequestUpload" | class type XmlHttpRequest.xmlHttpRequestUpload >>>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_keyword"|object>><<a_api text=".." | class type XmlHttpRequest.xmlHttpRequestUpload >><<span class="ocsforge_color_keyword"|end>>>><<pre id="VALcreate" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|create>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="xmlHttpRequest" | class type XmlHttpRequest.xmlHttpRequest >> <<a_api text="Js.t" | type Js.t >>>>>>
~The next part of this module allow one to use ~Ocaml with no need for
     ~Javascript documentation~.
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Event" | module XmlHttpRequest.Event >> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module XmlHttpRequest.Event >><<span class="ocsforge_color_keyword"|end>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEgeneric_http_frame"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_type"|'response>> <<span class="odocwiki_name"|generic~_http~_frame>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|url:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|code:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|headers:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> string option>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|content:>> <<span class="odocwiki_type"|'response>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|content_xml:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="Dom.element" | class type Dom.element >> <<a_api text="Dom.document" | class type Dom.document >> <<a_api text="Js.t" | type Js.t >> option>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<div class="odocwiki_info"|~The type for ~X~H~R results~. ~The code field is the http status code of the
    answer~. ~The headers field is a function associating values to any header
    name~.
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEhttp_frame"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|http~_frame>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|string <<a_api text="generic_http_frame" | type XmlHttpRequest.generic_http_frame >>>> >><<pre id="EXCEPTIONWrong_headers" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|exception>> <<span class="odocwiki_name"|Wrong_headers>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >>int * <<span class="ocsforge_color_delimiter"| ( >>string <<span class="ocsforge_color_delimiter"| -> >> string option<<span class="ocsforge_color_delimiter"| ) >><<span class="ocsforge_color_delimiter"| ) >>>>>><<div class="odocwiki_info"|~The exception raise by perform functions when the check~_headers
    parameter returned false~. ~The parameter of the exception is a
    function is like the <<span class="odocwiki_inlinecode"|headers>> function of <<span class="odocwiki_inlinecode"|http~_frame>>
>>
<<pre id="VALperform_raw" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|perform~_raw>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?headers: >><<span class="ocsforge_color_delimiter"| ( >>string * string<<span class="ocsforge_color_delimiter"| ) >> list <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?content_type: >>string <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?post_args: >><<span class="ocsforge_color_delimiter"| ( >>string * <<a_api text="Form.form_elt" | type Form.form_elt >><<span class="ocsforge_color_delimiter"| ) >> list <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?get_args: >><<span class="ocsforge_color_delimiter"| ( >>string * string<<span class="ocsforge_color_delimiter"| ) >> list <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?form_arg: >><<a_api text="Form.form_contents" | type Form.form_contents >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?check_headers: >><<span class="ocsforge_color_delimiter"| ( >>int <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >>string <<span class="ocsforge_color_delimiter"| -> >> string option<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> bool<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?progress: >><<span class="ocsforge_color_delimiter"| ( >>int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?upload_progress: >><<span class="ocsforge_color_delimiter"| ( >>int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?override_mime_type: >>string <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?override_method: >>[< `DELETE\\                    | `GET\\                    | `HEAD\\                    | `OPTIONS\\                    | `PATCH\\                    | `POST\\                    | `PUT ] <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?with_credentials: >>bool <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| response_type: >>'a <<a_api text="response" | type XmlHttpRequest.response >> <<span class="ocsforge_color_delimiter"| -> >>\\  string <<span class="ocsforge_color_delimiter"| -> >> 'a <<a_api text="generic_http_frame" | type XmlHttpRequest.generic_http_frame >> <<span class="ocsforge_color_uid"|Lwt>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|perform~_raw>> is the same as <<a_api | val XmlHttpRequest.perform_raw_url >> except that an additional
      response~_type argument can be given to set the ~X~M~L~Http~Request
      response~Type~, and hence return different types of data for ~G~E~T
      requests~.
>>
<<pre id="VALperform_raw_url" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|perform~_raw~_url>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?headers: >><<span class="ocsforge_color_delimiter"| ( >>string * string<<span class="ocsforge_color_delimiter"| ) >> list <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?content_type: >>string <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?post_args: >><<span class="ocsforge_color_delimiter"| ( >>string * <<a_api text="Form.form_elt" | type Form.form_elt >><<span class="ocsforge_color_delimiter"| ) >> list <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?get_args: >><<span class="ocsforge_color_delimiter"| ( >>string * string<<span class="ocsforge_color_delimiter"| ) >> list <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?form_arg: >><<a_api text="Form.form_contents" | type Form.form_contents >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?check_headers: >><<span class="ocsforge_color_delimiter"| ( >>int <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >>string <<span class="ocsforge_color_delimiter"| -> >> string option<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> bool<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?progress: >><<span class="ocsforge_color_delimiter"| ( >>int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?upload_progress: >><<span class="ocsforge_color_delimiter"| ( >>int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?override_mime_type: >>string <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?override_method: >>[< `DELETE\\                    | `GET\\                    | `HEAD\\                    | `OPTIONS\\                    | `PATCH\\                    | `POST\\                    | `PUT ] <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?with_credentials: >>bool <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="http_frame" | type XmlHttpRequest.http_frame >> <<span class="ocsforge_color_uid"|Lwt>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|perform~_raw~_url>> makes an asynchronous request to the specified <<span class="odocwiki_inlinecode"|url>> with
      specified options~. ~The result is a cancelable thread returning
      an ~H~T~T~P frame~. ~By default~, if <<span class="odocwiki_inlinecode"|post~_args>> and <<span class="odocwiki_inlinecode"|form~_arg>> are <<span class="odocwiki_inlinecode"|~None>>~, a ~G~E~T
      request is used~. ~If <<span class="odocwiki_inlinecode"|post~_args>> or <<span class="odocwiki_inlinecode"|form~_arg>> is <<span class="odocwiki_inlinecode"|~Some ~_>> ~(even <<span class="odocwiki_inlinecode"|~Some ~[~]>>~) then a ~P~O~S~T
      request is made~. ~But if <<span class="odocwiki_inlinecode"|override~_method>> is set~, the request method is forced~,
      no matter the <<span class="odocwiki_inlinecode"|post~_args>> or <<span class="odocwiki_inlinecode"|form~_arg>> value~. ~For example~, with <<span class="odocwiki_inlinecode"|override~_method>>
      set to <<span class="odocwiki_inlinecode"|`~P~U~T>> and <<span class="odocwiki_inlinecode"|form~_arg>> set to <<span class="odocwiki_inlinecode"|~Some ~_>> a ~P~U~T request including the form data
      will be made~. ~The <<span class="odocwiki_inlinecode"|check~_headers>> argument is run as soon as the answer
      code and headers are available~. ~If it returns false~, the request is canceled
      and the functions raise the <<span class="odocwiki_inlinecode"|~Wrong~_headers>> exception
>>
<<pre id="VALperform" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|perform>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?headers: >><<span class="ocsforge_color_delimiter"| ( >>string * string<<span class="ocsforge_color_delimiter"| ) >> list <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?content_type: >>string <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?post_args: >><<span class="ocsforge_color_delimiter"| ( >>string * <<a_api text="Form.form_elt" | type Form.form_elt >><<span class="ocsforge_color_delimiter"| ) >> list <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?get_args: >><<span class="ocsforge_color_delimiter"| ( >>string * string<<span class="ocsforge_color_delimiter"| ) >> list <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?form_arg: >><<a_api text="Form.form_contents" | type Form.form_contents >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?check_headers: >><<span class="ocsforge_color_delimiter"| ( >>int <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >>string <<span class="ocsforge_color_delimiter"| -> >> string option<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> bool<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?progress: >><<span class="ocsforge_color_delimiter"| ( >>int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?upload_progress: >><<span class="ocsforge_color_delimiter"| ( >>int <<span class="ocsforge_color_delimiter"| -> >> int <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?override_mime_type: >>string <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?override_method: >>[< `DELETE\\                    | `GET\\                    | `HEAD\\                    | `OPTIONS\\                    | `PATCH\\                    | `POST\\                    | `PUT ] <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?with_credentials: >>bool <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="Url.url" | type Url.url >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="http_frame" | type XmlHttpRequest.http_frame >> <<span class="ocsforge_color_uid"|Lwt>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|perform>> is the same as <<a_api | val XmlHttpRequest.perform_raw_url >> except that the ~Url argument has type
      <<a_api | type Url.url >>~.
>>
<<pre id="VALget" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|get>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="http_frame" | type XmlHttpRequest.http_frame >> <<span class="ocsforge_color_uid"|Lwt>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|get url>> makes an asynchronous request to the specified <<span class="odocwiki_inlinecode"|url>>
>>
