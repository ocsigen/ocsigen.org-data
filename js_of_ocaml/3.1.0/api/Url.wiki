=Module <<a_api_type | module Url >> =
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<span class="ocsforge_color_uid"|<<span class="ocsforge_color_uid"|Url>>>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module Url >><<span class="ocsforge_color_keyword"|end>>>>~This module provides functions for tampering with ~Url~. ~It~'s main goal is to
    allow one to stay in the ~Ocaml realm without wandering into the
    <<span class="odocwiki_inlinecode"|~Dom~_html~.window>>~#~#~.location object~.

----

~The first functions are mainly from and to string conversion functions for
     the different parts of a url~.
<<pre id="VALurldecode" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|urldecode>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> string>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|urldecode s>> swaps percent encoding characters for their usual
    representation~.
>>
<<pre id="VALurlencode" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|urlencode>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_label"| ?with_plus: >>bool <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> string>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|urlencode ~?with~_plus s>> replace characters for their percent encoding
    representation~. ~Note that the ~'~/~' ~(slash~) character is escaped as well~. ~If
    <<span class="odocwiki_inlinecode"|with~_plus>> is <<span class="odocwiki_inlinecode"|true>> ~(default~) then <<span class="odocwiki_inlinecode"|~'~+~'>>~'s are escaped as <<span class="odocwiki_inlinecode"|"~%~2~B">>~. ~If not~,
    <<span class="odocwiki_inlinecode"|~'~+~'>>~'s are left as is~.
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEhttp_url"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|http~_url>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|hu_host:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~The host part of the url~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|hu_port:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~The port for the connection if any~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|hu_path:>> <<span class="odocwiki_type"|string list>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~The path splitted on <<span class="odocwiki_inlinecode"|~'~/~'>> characters~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|hu_path_string:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~The original entire path~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|hu_arguments:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >>string * string<<span class="ocsforge_color_delimiter"| ) >> list>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Arguments as a field~-value
                                             association list~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|hu_fragment:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~The fragment part ~(after the <<span class="odocwiki_inlinecode"|~'~#~'>> character~)~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<div class="odocwiki_info"|~The type for ~H~T~T~P~(s~) url~.
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEfile_url"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|file~_url>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|fu_path:>> <<span class="odocwiki_type"|string list>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|fu_path_string:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|fu_arguments:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >>string * string<<span class="ocsforge_color_delimiter"| ) >> list>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|fu_fragment:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<div class="odocwiki_info"|~The type for local file urls~.
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEurl"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|url>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Http>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<a_api text="http_url" | type Url.http_url >>>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Non secure ~H~T~T~P urls
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Https>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<a_api text="http_url" | type Url.http_url >>>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Secure ~H~T~T~P~S urls
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|File>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<a_api text="file_url" | type Url.file_url >>>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Local files
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>>>>>><<div class="odocwiki_info"|~The type for urls~.
>>
<<pre id="VALdefault_http_port" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|default~_http~_port>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|int>>>><<div class="odocwiki_info"|~The default port for <<span class="odocwiki_inlinecode"|~Http>> communications ~(~8~0~)~.
>>
<<pre id="VALdefault_https_port" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|default~_https~_port>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|int>>>><<div class="odocwiki_info"|~The default port for <<span class="odocwiki_inlinecode"|~Https>> communications ~(~4~4~3~)~.
>>
<<pre id="VALpath_of_path_string" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|path~_of~_path~_string>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> string list>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|path~_of~_path~_string s>> splits <<span class="odocwiki_inlinecode"|s>> on each <<span class="odocwiki_inlinecode"|"~/">> character~.
>>
<<pre id="VALencode_arguments" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|encode~_arguments>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >>string * string<<span class="ocsforge_color_delimiter"| ) >> list <<span class="ocsforge_color_delimiter"| -> >> string>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|encode~_arguments a>> expects a list of pair of values of the form
    <<span class="odocwiki_inlinecode"|~(name~,value~)>> were <<span class="odocwiki_inlinecode"|name>> is the name of an argument and <<span class="odocwiki_inlinecode"|value>> it~'s
    associated value~.
>>
<<pre id="VALdecode_arguments" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|decode~_arguments>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >>string * string<<span class="ocsforge_color_delimiter"| ) >> list>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|decode~_arguments s>> parses <<span class="odocwiki_inlinecode"|s>> returning the sliced~-diced
    association list~.
>>

~The following part allow one to handle ~Url object in a much higher level
    than what a string provides~.
<<pre id="VALurl_of_string" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|url~_of~_string>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="url" | type Url.url >> option>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|url~_of~_string s>> parses <<span class="odocwiki_inlinecode"|s>> and builds a value of type <<span class="odocwiki_inlinecode"|url>> if <<span class="odocwiki_inlinecode"|s>> is not
    a valid url string~, it returns <<span class="odocwiki_inlinecode"|~None>>~.
>>
<<pre id="VALstring_of_url" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|string~_of~_url>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="url" | type Url.url >> <<span class="ocsforge_color_delimiter"| -> >> string>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|string~_of~_url u>> returns a valid string representation of <<span class="odocwiki_inlinecode"|u>>~. ~Note that
  ~* <<span class="odocwiki_inlinecode"|string~_of~_url ~(~(fun ~Some u ~-~> u~) ~(url~_of~_string s~)~)>> is ~N~O~T necessarily
  ~* equal to <<span class="odocwiki_inlinecode"|s>>~. ~However <<span class="odocwiki_inlinecode"|url~_of~_string ~(string~_of~_url u~) ~= u>>~.
>>
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Current" | module Url.Current >> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module Url.Current >><<span class="ocsforge_color_keyword"|end>>>><<div class="odocwiki_info"|~This module can be used to handle the ~Url associated to the current
    document~.
>>
