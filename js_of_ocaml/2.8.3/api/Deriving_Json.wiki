=Module <<a_api_type | module Deriving_Json >> =
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<span class="ocsforge_color_uid"|<<span class="ocsforge_color_uid"|Deriving_Json>>>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module Deriving_Json >><<span class="ocsforge_color_keyword"|end>>>>~Typesafe ~I~O ~(based on the //deriving// library~)~.
**See also**
* [[https://github.com/ocsigen/deriving|the source code of //deriving//]]
* [[http://code.google.com/p/deriving/|the documentation of the original //deriving// library by ~Jeremy ~Yallop~.]]


----
<<pre class="ocsforge_color odocwiki_code" id="TYPEt"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_type"|'a>> <<span class="odocwiki_name"|t>>>><<div class="odocwiki_info"|~The type of ~J~S~O~N parser~/printer for value of type <<span class="odocwiki_inlinecode"|~'a>>~.
>>
<<pre id="VALmake" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|make>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_delimiter"| ( >><<span class="ocsforge_color_uid"|Buffer>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>> <<span class="ocsforge_color_delimiter"| -> >> 'a <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >><<a_api text="Deriving_Json_lexer.lexbuf" | type Deriving_Json_lexer.lexbuf >> <<span class="ocsforge_color_delimiter"| -> >> 'a<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> 'a <<a_api text="t" | type Deriving_Json.t >>>>>><<pre id="VALwrite" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|write>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|'a <<a_api text="t" | type Deriving_Json.t >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|Buffer>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>> <<span class="ocsforge_color_delimiter"| -> >> 'a <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<pre id="VALread" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|read>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|'a <<a_api text="t" | type Deriving_Json.t >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="Deriving_Json_lexer.lexbuf" | type Deriving_Json_lexer.lexbuf >> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<pre id="VALto_string" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|to~_string>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|'a <<a_api text="t" | type Deriving_Json.t >> <<span class="ocsforge_color_delimiter"| -> >> 'a <<span class="ocsforge_color_delimiter"| -> >> string>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|to~_string ~Json~.t~<ty~> v>> marshal the <<span class="odocwiki_inlinecode"|v>> of type <<span class="odocwiki_inlinecode"|ty>> to a ~J~S~O~N string~.
>>
<<pre id="VALfrom_string" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|from~_string>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|'a <<a_api text="t" | type Deriving_Json.t >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|from~_string ~Json~.t~<ty~> s>> safely unmarshal the ~J~S~O~N <<span class="odocwiki_inlinecode"|s>> into an
    ~O~Caml value of type <<span class="odocwiki_inlinecode"|ty>>~. ~Throws <<span class="odocwiki_inlinecode"|~Failure>> if the received value
    isn~'t the javascript representation of a value of type <<span class="odocwiki_inlinecode"|ty>>~.
>>
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module type>> <<a_api text="Json" | module type Deriving_Json.Json >> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module type Deriving_Json.Json >><<span class="ocsforge_color_keyword"|end>>>><<div class="odocwiki_info"|~The signature of the ~J~S~O~N class~.
>>


==@@id="2_Convertion"@@~Convertion ==

<<pre id="VALconvert" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|convert>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|'a <<a_api text="t" | type Deriving_Json.t >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >>'a <<span class="ocsforge_color_delimiter"| -> >> 'b<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >>'b <<span class="ocsforge_color_delimiter"| -> >> 'a<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> 'b <<a_api text="t" | type Deriving_Json.t >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|convert ~(t ~: ~'a t~) ~(from~_ ~: ~'a ~-~> ~'b~) ~(to~_ ~: ~'b ~-~> ~'a~)>>
    generate a ~J~S~O~N parser~/printer for value of type <<span class="odocwiki_inlinecode"|~'b>> using the parser~/printer of type <<span class="odocwiki_inlinecode"|~'a>>
    provided by <<span class="odocwiki_inlinecode"|t>>
>>
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module type>> <<a_api text="Json_converter" | module type Deriving_Json.Json_converter >> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module type Deriving_Json.Json_converter >><<span class="ocsforge_color_keyword"|end>>>><<div class="odocwiki_info"|~The signature of the ~Converter class~.
>>
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Convert" | module Deriving_Json.Convert >> <<span class="ocsforge_color_delimiter"|(>>J <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Json_converter" | module Deriving_Json.Json_converter >>>><<span class="ocsforge_color_delimiter"|)>> : \\  <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="odocwiki_type"|  with type a = J.b>>>><<div class="odocwiki_info"|~Generate a ~J~S~O~N class from a ~Converter
>>


===@@id="3_Examples"@@~Examples ===


~Parse and serialize a map as if it was an array of tuple~.

<<code language='ocaml'|(* My map module *)
module StringMap = Map.Make(String)

(* Use deriving_json syntax to generate the JSON class for the array of tuple *)
type 'a t = (string * 'a) array deriving (Json)

(* generate the JSON class for StringMap *)
module Json_string_map_t(A : Deriving_Json.Json) : Deriving_Json.Json with type a = A.a StringMap.t = struct
  module S = Json_t(A)
  include Deriving_Json.Convert(struct
      type a = A.a t
      type b = A.a StringMap.t
      let t = S.t
      let to_ : b -> A.a t = fun a -> Array.of_list (StringMap.bindings a)
      let from_ : A.a t -> b = fun l ->
        Array.fold_left
          (fun map (x,v) -> StringMap.add x v map)
          StringMap.empty
          l
    end)
end
>>



~You can then ask the syntax extension to use the ~J~S~O~N class <<span class="odocwiki_inlinecode"|~Json~_string~_map~_t>> for <<span class="odocwiki_inlinecode"|~String~Map~.t>>
by registering an alias

<<code language='ocaml'|Pa_deriving_Json.register_predefs ["StringMap";"t"] ["string_map_t"]>>



===@@id="3_Examples"@@~Examples ===


~Parse and serialize a map as if it was an array of tuple~.

<<code language='ocaml'|(* My map module *)
module StringMap = Map.Make(String)

(* Use deriving_json syntax to generate the JSON class for the array of tuple *)
type 'a t = (string * 'a) array deriving (Json)

(* generate the JSON class for StringMap *)
module Json_string_map_t(A : Deriving_Json.Json) : Deriving_Json.Json with type a = A.a StringMap.t = struct
  module S = Json_t(A)
  include Deriving_Json.Convert(struct
      type a = A.a t
      type b = A.a StringMap.t
      let t = S.t
      let to_ : b -> A.a t = fun a -> Array.of_list (StringMap.bindings a)
      let from_ : A.a t -> b = fun l ->
        Array.fold_left
          (fun map (x,v) -> StringMap.add x v map)
          StringMap.empty
          l
    end)
end
>>



~You can then ask the syntax extension to use the ~J~S~O~N class <<span class="odocwiki_inlinecode"|~Json~_string~_map~_t>> for <<span class="odocwiki_inlinecode"|~String~Map~.t>>
by registering an alias

<<code language='ocaml'|Pa_deriving_Json.register_predefs ["StringMap";"t"] ["string_map_t"]>>


~Deriver
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module type>> <<a_api text="Json_min" | module type Deriving_Json.Json_min >> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module type Deriving_Json.Json_min >><<span class="ocsforge_color_keyword"|end>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module type>> <<a_api text="Json_min'" | module type Deriving_Json.Json_min' >> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module type Deriving_Json.Json_min' >><<span class="ocsforge_color_keyword"|end>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module type>> <<a_api text="Json_min''" | module type Deriving_Json.Json_min'' >> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module type Deriving_Json.Json_min'' >><<span class="ocsforge_color_keyword"|end>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Defaults" | module Deriving_Json.Defaults >> <<span class="ocsforge_color_delimiter"|(>>J <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Json_min" | module Deriving_Json.Json_min >>>><<span class="ocsforge_color_delimiter"|)>> : \\  <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="odocwiki_type"|  with type a = J.a>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Defaults'" | module Deriving_Json.Defaults' >> <<span class="ocsforge_color_delimiter"|(>>J <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Json_min'" | module Deriving_Json.Json_min' >>>><<span class="ocsforge_color_delimiter"|)>> : \\  <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="odocwiki_type"|  with type a = J.a>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Defaults''" | module Deriving_Json.Defaults'' >> <<span class="ocsforge_color_delimiter"|(>>J <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Json_min''" | module Deriving_Json.Json_min'' >>>><<span class="ocsforge_color_delimiter"|)>> : \\  <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="odocwiki_type"|  with type a = J.a>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Json_char" | module Deriving_Json.Json_char >> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="odocwiki_type"|  with type a = char>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Json_bool" | module Deriving_Json.Json_bool >> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="odocwiki_type"|  with type a = bool>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Json_unit" | module Deriving_Json.Json_unit >> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="odocwiki_type"|  with type a = unit>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Json_int" | module Deriving_Json.Json_int >> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="odocwiki_type"|  with type a = int>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Json_int32" | module Deriving_Json.Json_int32 >> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="odocwiki_type"|  with type a = int32>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Json_int64" | module Deriving_Json.Json_int64 >> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="odocwiki_type"|  with type a = int64>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Json_nativeint" | module Deriving_Json.Json_nativeint >> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="odocwiki_type"|  with type a = nativeint>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Json_float" | module Deriving_Json.Json_float >> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="odocwiki_type"|  with type a = float>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Json_string" | module Deriving_Json.Json_string >> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="odocwiki_type"|  with type a = string>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Json_list" | module Deriving_Json.Json_list >> <<span class="ocsforge_color_delimiter"|(>>A <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="ocsforge_color_delimiter"|)>> : \\  <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="odocwiki_type"|  with type a = A.a list>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Json_ref" | module Deriving_Json.Json_ref >> <<span class="ocsforge_color_delimiter"|(>>A <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="ocsforge_color_delimiter"|)>> : \\  <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="odocwiki_type"|  with type a = A.a ref>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Json_option" | module Deriving_Json.Json_option >> <<span class="ocsforge_color_delimiter"|(>>A <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="ocsforge_color_delimiter"|)>> : \\  <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="odocwiki_type"|  with type a = A.a option>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Json_array" | module Deriving_Json.Json_array >> <<span class="ocsforge_color_delimiter"|(>>A <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="ocsforge_color_delimiter"|)>> : \\  <<span class="odocwiki_type"|<<a_api text="Json" | module Deriving_Json.Json >>>><<span class="odocwiki_type"|  with type a = A.a array>>>><<pre id="VALread_list" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|read~_list>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_delimiter"| ( >><<a_api text="Deriving_Json_lexer.lexbuf" | type Deriving_Json_lexer.lexbuf >> <<span class="ocsforge_color_delimiter"| -> >> 'a<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="Deriving_Json_lexer.lexbuf" | type Deriving_Json_lexer.lexbuf >> <<span class="ocsforge_color_delimiter"| -> >> 'a list>>>><<pre id="VALwrite_list" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|write~_list>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >><<span class="ocsforge_color_uid"|Buffer>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>> <<span class="ocsforge_color_delimiter"| -> >> 'a <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|Buffer>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>> <<span class="ocsforge_color_delimiter"| -> >> 'a list <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<pre id="VALread_ref" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|read~_ref>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_delimiter"| ( >><<a_api text="Deriving_Json_lexer.lexbuf" | type Deriving_Json_lexer.lexbuf >> <<span class="ocsforge_color_delimiter"| -> >> 'a<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="Deriving_Json_lexer.lexbuf" | type Deriving_Json_lexer.lexbuf >> <<span class="ocsforge_color_delimiter"| -> >> 'a <<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|ref>>>>>><<pre id="VALwrite_ref" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|write~_ref>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_delimiter"| ( >><<span class="ocsforge_color_uid"|Buffer>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>> <<span class="ocsforge_color_delimiter"| -> >> 'a <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|Buffer>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>> <<span class="ocsforge_color_delimiter"| -> >> 'a <<span class="ocsforge_color_uid"|Pervasives>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|ref>> <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<pre id="VALread_option" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|read~_option>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_delimiter"| ( >><<a_api text="Deriving_Json_lexer.lexbuf" | type Deriving_Json_lexer.lexbuf >> <<span class="ocsforge_color_delimiter"| -> >> 'a<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="Deriving_Json_lexer.lexbuf" | type Deriving_Json_lexer.lexbuf >> <<span class="ocsforge_color_delimiter"| -> >> 'a option>>>><<pre id="VALwrite_option" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|write~_option>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_delimiter"| ( >><<span class="ocsforge_color_uid"|Buffer>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>> <<span class="ocsforge_color_delimiter"| -> >> 'a <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|Buffer>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>> <<span class="ocsforge_color_delimiter"| -> >> 'a option <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<pre id="VALread_array" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|read~_array>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_delimiter"| ( >><<a_api text="Deriving_Json_lexer.lexbuf" | type Deriving_Json_lexer.lexbuf >> <<span class="ocsforge_color_delimiter"| -> >> 'a<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="Deriving_Json_lexer.lexbuf" | type Deriving_Json_lexer.lexbuf >> <<span class="ocsforge_color_delimiter"| -> >> 'a array>>>><<pre id="VALwrite_array" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|write~_array>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >><<span class="ocsforge_color_uid"|Buffer>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>> <<span class="ocsforge_color_delimiter"| -> >> 'a <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|Buffer>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>> <<span class="ocsforge_color_delimiter"| -> >> 'a array <<span class="ocsforge_color_delimiter"| -> >> unit>>>>